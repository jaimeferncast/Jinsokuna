(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{172:function(e,t,n){"use strict";n.r(t);var r,a=n(0),i=n.n(a),o=n(19),c=n.n(o),s=n(36),u=n(11),d=n.n(u),l=n(13),p=n(22),m=n(15),j=n(17),h=n(21),b=n(20),x={palette:{avispa:{type:"dark",dark:"#202020",light:"#707070",secondary:{main:"#3f3f3f"},primary:{main:"#ffdf6c"}},sobrio:{type:"dark",dark:"#2a2929",light:"#ffffff",secondary:{main:"#7f7d7e"},primary:{main:"#d8705c"}},tierra:{dark:"#cc9b6d",light:"#f1ca89",secondary:{main:"#f2dac3"},primary:{main:"#5d84a6"}},cactus:{type:"dark",dark:"#164a41",light:"#9dc88d",secondary:{main:"#4d774e"},primary:{main:"#f1b24a"}},healthy:{dark:"#ddaf94",light:"#e8cebf",secondary:{main:"#fdf8f5"},primary:{main:"#266150"}},marino:{type:"dark",dark:"#12232e",light:"#4da8da",secondary:{main:"#203647"},primary:{main:"#007cc7"}}},font:{abril:"Abril Fatface",arial:"arial",anaheim:"Anaheim",cormorant:"Cormorant Garamond",cutive:"Cutive Mono",elite:"Special Elite",muli:"Muli",parisienne:"Parisienne",poiret:"Poiret One",righteous:"Righteous",shadows:"Shadows Into Light Two",trebuchet:"Trebuchet MS",verdana:"verdana"}},f=n(48),g=n.n(f),O=function e(){var t=this;Object(m.a)(this,e),this.getPalettes=function(){return t.api.get("palettes/")},this.updatePalette=function(e){return t.api.put("palettes/".concat(e))},this.getFonts=function(){return t.api.get("fonts/")},this.updateFont=function(e){return t.api.put("fonts/".concat(e))},this.api=g.a.create({baseURL:"https://jinsokuna.herokuapp.com/api/themes/",withCredentials:!0})},v=n(1),y=Object(a.createContext)(),w=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={palette:"",font:""},e.themeService=new O,e.componentDidMount=Object(p.a)(d.a.mark((function t(){var n,r,a,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l.a,t.next=3,e.themeService.getPalettes();case 3:return t.t1=t.sent.data.message,n=(0,t.t0)(t.t1,1),r=n[0],t.t2=l.a,t.next=9,e.themeService.getFonts();case 9:t.t3=t.sent.data.message,a=(0,t.t2)(t.t3,1),i=a[0],e.setState({palette:r.name,font:i.name});case 13:case"end":return t.stop()}}),t)}))),e.changePalette=function(t){e.themeService.updatePalette(t).then((function(){return e.setState({palette:t})})).catch((function(e){return alert(e)}))},e.changeFont=function(t){e.themeService.updateFont(t).then((function(){return e.setState({font:t})})).catch((function(e){return alert(e)}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.palette,r=t.font,a=this.changePalette,i=this.changeFont;return this.state.palette&&this.state.font&&Object(v.jsx)(y.Provider,{value:{theme:x,palette:x.palette[n],font:x.font[r],changePalette:a,changeFont:i},children:e})}}]),n}(a.Component),C=y,P=n(228),k=n(229),M=n(112),S=n(4),I=n(28),_=n(14),D=n(6),E=n(81),F=n(218),U=n(209),z=n(7),N=n(216),T=n(213),L=n(217),B=n(106),W=n.n(B),A=n(107),R=n.n(A),q=n(113),G=n(215),H=n(233),J=n(105),K=n.n(J),Y=Object(z.a)(U.a)(r||(r=Object(D.a)(["\n  font-family: arial;\n  border: 2px solid ",";\n  padding: 5px 15px;\n  ",";\n  ",";\n"])),(function(e){return"outlined"===e.variant?e.palette.primary.main:"rgba(0,0,0,0)"}),(function(e){return e.width&&"width: "+e.width+";"}),(function(e){return e.color&&"color: "+e.color+";"}));var V,Q,X=function(e){var t=Object(a.useContext)(C).palette;return Object(v.jsx)(Y,Object(S.a)(Object(S.a)({palette:t},e),{},{children:e.children}))},Z=Object(z.a)(T.a)(V||(V=Object(D.a)(["\n  display: none;\n  @media (max-width: 1067px) {\n    display: block;\n  }\n"]))),$=Object(z.a)(q.a)(Q||(Q=Object(D.a)(["\n  & .MuiPopover-paper {\n    border: 1px solid #767676;\n    background-color: ",";\n  }\n  & a {\n    text-decoration: none;\n  }\n"])),(function(e){return e.palette.dark}));var ee,te=Object(I.g)((function(e){var t=Object(a.useContext)(C).palette,n=Object(a.useState)(null),r=Object(l.a)(n,2),i=r[0],o=r[1],c=Boolean(i),u=function(){o(null)};return Object(v.jsxs)(Z,{item:!0,children:[Object(v.jsx)(G.a,{edge:"end",onClick:function(e){o(e.currentTarget)},children:Object(v.jsx)(K.a,{})}),Object(v.jsxs)($,{palette:t,anchorEl:i,keepMounted:!0,open:c,onClose:u,children:[Object(v.jsx)(H.a,{children:Object(v.jsx)(s.b,{to:"/",children:Object(v.jsx)(X,{width:"-webkit-fill-available",variant:"/"===e.location.pathname?"outlined":"text",onClick:u,children:"confecci\xf3n de carta"})})}),Object(v.jsx)(H.a,{children:Object(v.jsx)(s.b,{to:"/pedidos",children:Object(v.jsx)(X,{width:"-webkit-fill-available",variant:"/pedidos"===e.location.pathname?"outlined":"text",onClick:u,children:"Resumen de \xf3rdenes"})})}),Object(v.jsx)(H.a,{children:Object(v.jsx)(s.b,{to:"/usuarios",children:Object(v.jsx)(X,{width:"-webkit-fill-available",variant:"/usuarios"===e.location.pathname?"outlined":"text",onClick:u,children:"Gesti\xf3n de usuarios"})})}),Object(v.jsx)(H.a,{children:Object(v.jsx)(X,{width:"-webkit-fill-available",variant:"contained",color:"primary",onClick:e.logoutUser,children:"Cerrar sesi\xf3n"})})]})]})})),ne=n(173),re=n(174),ae=n(181),ie=function e(){var t=this;Object(m.a)(this,e),this.getMenus=function(){return t.api.get("menus/")},this.addMenu=function(e){return t.api.post("menus/new",e)},this.deleteMenu=function(e){return t.api.delete("menus/".concat(e))},this.updateMenu=function(e,n){return t.api.put("menus/".concat(e),n)},this.getCategories=function(){return t.api.get("categories/")},this.addCategory=function(e){return t.api.post("categories/new",e)},this.deleteCategory=function(e){return t.api.delete("categories/".concat(e))},this.updateCategory=function(e,n){return t.api.put("categories/".concat(e),n)},this.getProducts=function(){return t.api.get("products/")},this.getMenuProducts=function(){return t.api.get("products/menus")},this.addProduct=function(e){return t.api.post("products/new",e)},this.deleteProduct=function(e){return t.api.delete("products/".concat(e))},this.updateProduct=function(e,n){return t.api.put("products/".concat(e),n)},this.api=g.a.create({baseURL:"https://jinsokuna.herokuapp.com/api",withCredentials:!0})},oe=function(e){for(var t=["a","ante","bajo","cabe","con","contra","de","desde","durante","en","entre","hacia","hasta","mediante","para","por","seg\xfan","sin","so","sobre","tras","versus","v\xeda","un","una","unos","unas","el","los","la","las","lo"],n=e.toLowerCase().split(" "),r=0;r<n.length;r++)t.includes(n[r])||(n[r]=n[r].charAt(0).toUpperCase()+n[r].substring(1));return n.join(" ")},ce=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ie,e.next=3,n.getProducts();case 3:return r=e.sent.data.message,a=r.filter((function(e){return e.categories.some((function(e){return e.id===t}))})),e.abrupt("return",a.length+1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new ie,a={category:null,product:null},!t){e.next=5;break}return e.next=5,Promise.all(t.map((function(e){return r.updateCategory(e._id,e)}))).catch((function(e){return a.category=e}));case 5:if(!n){e.next=8;break}return e.next=8,Promise.all(n.map((function(e){return r.updateProduct(e._id,e)}))).catch((function(e){return a.product=e}));case 8:return i=(a.categry||a.product)&&{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"},e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(e,t){var n=t.menuContent.map((function(e){var t;return null===(t=e.products)||void 0===t?void 0:t.map((function(e){return e._id}))})).flat();return null===e||void 0===e?void 0:e.filter((function(e){return!n.includes(e._id)}))},de=Object(z.a)(T.a)(ee||(ee=Object(D.a)(["\n  display: none;\n  @media (max-width: 1067px) {\n    display: ",";\n  }\n  .select {\n    margin: 0 0 -5px 15px;\n      & label {\n      font-family: arial;\n    }\n  }\n  .colors {\n    & .MuiInputBase-input {\n      font-family: arial;\n    }\n  }\n"])),(function(e){return"yes"===e.display?"inline-flex":"none"}));var le,pe,me,je,he,be,xe=function(e){for(var t,n,r=Object(a.useContext)(C),i=r.theme,o=r.palette,c=r.font,s=r.changePalette,u=r.changeFont,d=[],p=0,m=Object.entries(i.palette);p<m.length;p++){var j=Object(l.a)(m[p],2),h=j[0],b=j[1];d.push(h),b===o&&(t=h)}for(var x=[],f=0,g=Object.entries(i.font);f<g.length;f++){var O=Object(l.a)(g[f],2),y=O[0],w=O[1];x.push(y),w===c&&(n=y)}var P=function(e){"palette"===e.target.name?s(e.target.value):u(e.target.value)};return Object(v.jsxs)(de,{container:!0,justify:"center",wrap:"nowrap",display:e.display,children:[Object(v.jsxs)(ne.a,{variant:"outlined",size:"small",className:"select colors",children:[Object(v.jsx)(re.a,{children:"Colores"}),Object(v.jsx)(ae.a,{name:"palette",value:t,onChange:P,label:"Colores",children:d.map((function(e){return Object(v.jsx)(H.a,{value:e,style:{background:"linear-gradient(217deg, ".concat(i.palette[e].dark,", ").concat(i.palette[e].primary.main,")")},children:oe(e)},e)}))})]}),Object(v.jsxs)(ne.a,{variant:"outlined",size:"small",className:"select",children:[Object(v.jsx)(re.a,{children:"Tipograf\xeda"}),Object(v.jsx)(ae.a,{name:"font",value:n,onChange:P,label:"Tipograf\xeda",children:x.map((function(e){return Object(v.jsx)(H.a,{value:e,style:{fontFamily:e},children:oe(e)},e)}))})]})]})},fe=function e(){var t=this;Object(m.a)(this,e),this.login=function(e){return t.api.post("/login",e)},this.logout=function(){return t.api.post("/logout")},this.isLoggedIn=function(){return t.api.get("/loggedin")},this.api=g.a.create({baseURL:"".concat("https://jinsokuna.herokuapp.com/api","/auth"),withCredentials:!0})},ge=Object(z.a)(N.a)(le||(le=Object(D.a)(["\n  position: fixed;\n  background-color: ",";\n"])),(function(e){return e.palette.dark})),Oe=Object(z.a)(T.a)(pe||(pe=Object(D.a)(["\n  display: flex;\n  @media (max-width: 1067px) {\n    display: none;\n  }\n"]))),ve=z.a.div(me||(me=Object(D.a)(["\n  margin-right: 20px;\n"]))),ye=Object(z.a)(T.a)(je||(je=Object(D.a)(["\n  display: flex;\n  margin-top: 5px;\n  @media (max-width: 599px) {\n    margin-left: -5px;\n  }\n"]))),we=Object(z.a)(W.a)(he||(he=Object(D.a)(["\n  font-size: 1.5rem;\n  margin-top: 11px;\n  margin-left: -5px;\n  @media (max-width: 599px) {\n    font-size: 1.2rem;\n  }\n"]))),Ce=Object(z.a)(R.a)(be||(be=Object(D.a)(["\n  font-size: 1.5rem;\n  margin-bottom: -8px;\n  @media (max-width: 599px) {\n    font-size: 1.2rem;\n  }\n"]))),Pe=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).logoutUser=function(){e.authService.logout().then((function(){e.props.storeUser(void 0)})).catch((function(e){return alert(e)}))},e.state={mobile:!(window.screen.width>1067)},e.authService=new fe,e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.context.palette;return Object(v.jsx)(ge,{palette:e,children:Object(v.jsx)(L.a,{children:Object(v.jsxs)(T.a,{container:!0,justify:"space-between",alignItems:"center",wrap:"nowrap",children:[Object(v.jsxs)(ye,{item:!0,children:[Object(v.jsx)(Ce,{color:"action"}),Object(v.jsx)(we,{color:"action"})]}),Object(v.jsx)(xe,{display:this.props.isMenuSelected?"yes":"no"}),Object(v.jsx)(te,Object(S.a)(Object(S.a)({},this.props),{},{logoutUser:this.logoutUser})),Object(v.jsxs)(Oe,{item:!0,children:[Object(v.jsx)(ve,{palette:e,children:Object(v.jsx)(s.b,{to:"/",children:Object(v.jsx)(X,{variant:"/"===this.props.location.pathname?"outlined":"text",children:"confecci\xf3n de carta"})})}),Object(v.jsx)(ve,{palette:e,children:Object(v.jsx)(s.b,{to:"/pedidos",children:Object(v.jsx)(X,{variant:"/pedidos"===this.props.location.pathname?"outlined":"text",children:"Resumen de \xf3rdenes"})})}),Object(v.jsx)(ve,{palette:e,children:Object(v.jsx)(s.b,{to:"/usuarios",children:Object(v.jsx)(X,{variant:"/usuarios"===this.props.location.pathname?"outlined":"text",children:"Gesti\xf3n de usuarios"})})})]}),Object(v.jsx)(Oe,{item:!0,children:Object(v.jsx)(X,{variant:"contained",color:"primary",onClick:this.logoutUser,children:"Cerrar sesi\xf3n"})})]})})})}}]),n}(a.Component);Pe.contextType=C;var ke=Object(I.g)(Pe);var Me,Se,Ie,_e=function(e){return Object(v.jsx)(E.a,{align:"center",variant:"h5",children:"P\xe1gina en construcci\xf3n"})},De=n(10),Ee=n(219),Fe=n(43),Ue=n.n(Fe),ze=z.a.div(Me||(Me=Object(D.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 15px;\n  & form {\n    margin-bottom: 10px;\n  }\n"]))),Ne=z.a.form(Se||(Se=Object(D.a)(["\n  width: 100%;\n"]))),Te=Object(z.a)(X)(Ie||(Ie=Object(D.a)(["\n  padding: 5px 10px;\n  font-size: 0.8rem;\n"])));var Le=function(e){var t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],i=n[1],o=function(t,n){e.addMenu(t,{name:n}),i("")};return Object(v.jsxs)(ze,{children:[Object(v.jsx)(Ne,{onSubmit:function(e){return o(e,r)},autoComplete:"off",children:Object(v.jsx)(F.a,{fullWidth:!0,autoFocus:!1,variant:"outlined",size:"small",label:"Nombre",type:"text",value:r,onChange:function(e){return i(e.target.value)}})}),Object(v.jsx)(Te,{color:"primary",onClick:function(e){return o(e,r)},startIcon:Object(v.jsx)(Ue.a,{}),children:"carta"===e.type?"nueva carta":"nuevo men\xfa"})]})},Be=n(29),We=n(30),Ae=n.n(We),Re=n(32),qe=n.n(Re);var Ge,He=function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)(E.a,{align:"center",gutterBottom:!0,variant:"h5",children:"P\xe1gina en construcci\xf3n"}),Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(v.jsx)(X,{onClick:function(){return e.close()},children:"Volver"})})]})},Je=z.a.div(Ge||(Ge=Object(D.a)(["\n  padding: 5px 10px 5px 20px;\n  margin: 0 0 5px;\n  transform: ",";\n  background-color: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & .MuiButton-label {\n    font-size: 0.75rem;\n    line-height: normal;\n  }\n"])),(function(e){return e.isDragging?"rotate(2deg)":"none"}),(function(e){return e.isDragging?e.palette.primary.main:e.palette.dark})),Ke=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).showProductInfo=function(t){e.props.showProductTooltip(t)},e.hideProductInfo=function(){e.props.hideProductTooltip()},e.deleteProduct=function(){e.props.showConfirmationMessage(e.props.index,e.props.product._id,e.props.category)},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.context.palette;return Object(v.jsx)(Be.b,{draggableId:this.props.product._id,index:this.props.index,children:function(n,r){return Object(v.jsxs)(Je,Object(S.a)(Object(S.a)(Object(S.a)({palette:t},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,isDragging:r.isDragging,onMouseEnter:function(){return e.showProductInfo(e.props.product)},onMouseLeave:function(){return e.hideProductInfo()},children:[Object(v.jsx)(E.a,{variant:"h6",noWrap:!0,children:oe(e.props.product.name)}),Object(v.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.props.openProductForm(e.props.product)},color:"primary",endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:e.deleteProduct,color:"primary",endIcon:Object(v.jsx)(Ae.a,{})})]})]}))}})}}]),n}(a.Component);Ke.contextType=C;var Ye,Ve,Qe,Xe,Ze,$e,et,tt=Ke,nt=z.a.div(Ye||(Ye=Object(D.a)(["\n  margin: 5px 0;\n  padding: 5px 0 5px;\n  background-color: ",";\n  border-radius: 5px;\n  width: 100%;\n  max-width: 548px;\n  display: flex;\n  flex-direction: column;\n"])),(function(e){return e.palette.dark})),rt=Object(z.a)(T.a)(Ve||(Ve=Object(D.a)(["\n  padding: 0 10px;\n"]))),at=Object(z.a)(E.a)(Qe||(Qe=Object(D.a)(["\n  padding: 12px 12px 0 10px;\n  &.cat-description {\n    font-style: italic;\n    padding-top: 0;\n    margin-left: 10px;\n  }\n  &.product-placeholder {\n    padding-bottom: 12px;\n    margin-left: 10px;\n  }\n"]))),it=Object(z.a)(F.a)(Xe||(Xe=Object(D.a)(["\n  color: red;\n  margin: 9px 0 1px 10px;\n  width: 100%;\n"]))),ot=z.a.div(Ze||(Ze=Object(D.a)(["\n  padding: 5px 0 0;\n  transition: background-color 0.2s ease;\n  background-color: ",";\n  flex-grow: 1;\n"])),(function(e){return e.isDraggingOver?e.palette.light:"inherit"})),ct=z.a.form($e||($e=Object(D.a)(["\n  width: 99%;\n  & input, label {\n    font-family: arial;\n  }\n"]))),st=Object(z.a)(T.a)(et||(et=Object(D.a)(["\n  padding: 10px 0 5px 12px;\n"]))),ut=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).componentDidMount=function(){e.setState({category:e.props.category})},e.toggleInput=function(){e.state.showCategoryInput||(window.addEventListener("mousedown",e.handleClick),window.addEventListener("keypress",e.handleEnter),e.setState({showCategoryInput:!0}))},e.handleClick=function(t){"name"!==t.target.name&&"description"!==t.target.name&&e.inputSubmit()},e.handleEnter=function(t){"Enter"===t.key&&e.inputSubmit()},e.handleInputChange=function(t){var n=t.target,r=n.value,a=n.name;e.setState({category:Object(S.a)(Object(S.a)({},e.state.category),{},Object(_.a)({},a,r))})},e.inputSubmit=function(){window.removeEventListener("mousedown",e.handleClick),window.removeEventListener("keypress",e.handleEnter),e.props.editCategory(e.state.category),e.setState({showCategoryInput:!1})},e.componentDidUpdate=function(t,n){e.state.showCategoryInput!==n.showCategoryInput&&e.props.category.name===t.category.name&&e.setState({category:Object(S.a)(Object(S.a)({},e.state.category),{},{name:e.props.category.name})})},e.state={showCategoryInput:!1},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.context.palette;return Object(v.jsx)(Be.b,{draggableId:this.props.category._id,index:this.props.index,children:function(n){return Object(v.jsxs)(nt,Object(S.a)(Object(S.a)({palette:t},n.draggableProps),{},{ref:n.innerRef,children:[Object(v.jsxs)(rt,Object(S.a)(Object(S.a)({},n.dragHandleProps),{},{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[e.state.showCategoryInput?Object(v.jsxs)(ct,{autoComplete:"off",children:[Object(v.jsxs)(T.a,{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[Object(v.jsx)(T.a,{item:!0,xs:7,style:{marginRight:"24px"},children:Object(v.jsx)(it,{style:{width:"100%"},palette:t,name:"name",size:"small",label:"Categor\xeda",type:"text",autoFocus:!0,value:e.state.category.name,onChange:e.handleInputChange})}),Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(U.a,{variant:"outlined",color:"primary",style:{fontFamily:"arial"},children:"guardar"})})]}),Object(v.jsx)(it,{style:{width:"97%",marginBottom:"15px"},palette:t,name:"description",size:"small",label:"Descripci\xf3n",type:"text",value:e.state.category.description,onChange:e.handleInputChange})]}):Object(v.jsx)(at,{palette:t,variant:"h5",noWrap:!0,children:oe(e.props.category.name)}),Object(v.jsx)(T.a,{item:!0,children:!e.state.showCategoryInput&&Object(v.jsxs)(T.a,{container:!0,wrap:"nowrap",children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.toggleInput()},endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.props.showConfirmationMessage(e.props.index,e.props.category._id)},endIcon:Object(v.jsx)(Ae.a,{})})]})})]})),e.props.category.description&&!e.state.showCategoryInput&&Object(v.jsx)(at,{palette:t,variant:"h6",noWrap:!0,className:"cat-description",children:e.props.category.description.slice(0,1).toUpperCase()+e.props.category.description.slice(1)}),Object(v.jsx)(Ee.a,{style:{margin:"12px 0 0",zIndex:"999"}}),Object(v.jsx)(Be.c,{droppableId:e.props.category._id,type:"product",children:function(n,r){return Object(v.jsxs)(ot,Object(S.a)(Object(S.a)({palette:t,ref:n.innerRef},n.droppableProps),{},{isDraggingOver:r.isDraggingOver,children:[e.props.products.sort((function(t,n){return t.categories.find((function(t){return t.id===e.props.category._id})).index-n.categories.find((function(t){return t.id===e.props.category._id})).index})).map((function(t){return Object(v.jsx)(tt,{category:e.props.category._id,product:t,index:t.categories.find((function(t){return t.id===e.props.category._id})).index,showConfirmationMessage:e.props.showConfirmationMessage,openProductForm:e.props.openProductForm,showProductTooltip:e.props.showProductTooltip,hideProductTooltip:e.props.hideProductTooltip},t._id)})),!e.props.products.some((function(t){return t.categories.some((function(t){return t.id===e.props.category._id}))}))&&!r.isDraggingOver&&Object(v.jsx)(at,{variant:"subtitle2",margin:"normal",color:"primary",className:"product-placeholder",children:"A\xfan no has a\xf1adido productos a esta categor\xeda."}),n.placeholder]}))}}),Object(v.jsx)(Ee.a,{}),Object(v.jsx)(st,{container:!0,justify:"flex-start",children:Object(v.jsx)(X,{color:"primary",onClick:function(){return e.props.openProductForm(null,e.props.category._id)},size:"small",startIcon:Object(v.jsx)(Ue.a,{}),children:"Nuevo producto"})})]}))}})}}]),n}(a.Component);ut.contextType=C;var dt,lt,pt,mt=ut,jt=z.a.div(dt||(dt=Object(D.a)(["\n  border: 2px solid ",";\n  border-radius: 5px;\n  position: fixed;\n  left: calc(50% + 54px);\n  top: ",";\n  background-color: ",";\n  width: 450px;\n  padding: ",";\n  @media (max-width: 1067px) {\n    display: none;\n  }\n  & h6 {\n    font-family: ",";\n  }\n"])),(function(e){return e.product?e.palette.primary.main:"#ffffff00"}),(function(e){return e.menuDescription?"199px":"167px"}),(function(e){return e.palette.dark}),(function(e){return e.padding||"0 0 12px 0"}),(function(e){return e.font})),ht=Object(z.a)(E.a)(lt||(lt=Object(D.a)(["\n  padding: 15px 15px 10px;\n  font-weight: 200;\n"]))),bt=Object(z.a)(E.a)(pt||(pt=Object(D.a)(["\n  padding: 10px 15px;\n  font-weight: 400;\n"])));var xt,ft,gt,Ot=function(e){var t=Object(a.useContext)(C).palette;return Object(v.jsxs)(jt,{palette:t,menuDescription:e.menuDescription,product:!0,children:[Object(v.jsx)(ht,{variant:"h5",children:oe(e.product.name)}),e.product.description&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ee.a,{}),Object(v.jsx)(bt,{variant:"h6",children:e.product.description.slice(0,1).toUpperCase()+e.product.description.slice(1)})]}),e.product.allergies.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ee.a,{}),Object(v.jsxs)(bt,{variant:"h6",children:[Object(v.jsx)("strong",{children:"Contiene:"}),Object(v.jsx)("br",{}),e.product.allergies.map((function(e,t,n){return t===n.length-1?Object(v.jsxs)("i",{children:[" ",e]},e):Object(v.jsxs)("i",{children:[" ",e," -"]},e)}))]})]}):null,Object(v.jsx)(Ee.a,{}),e.product.price.map((function(t,n){return Object(v.jsxs)(bt,{style:{marginBottom:"-10px",fontSize:"1.2rem",fontWeight:"200"},children:[t.subDescription&&t.subDescription.slice(0,1).toUpperCase()+t.subDescription.slice(1)+" - ",t.subPrice,"\u20ac ",e.product.minPortions>1?"(m\xednimo ".concat(e.product.minPortions," personas)"):null]},n)}))]})},vt=n(179),yt=n(180),wt=n(117),Ct=n(175),Pt=n(225),kt=n(226),Mt=n(227),St=n(231),It=n(110),_t=n.n(It),Dt=n(220),Et=n(221),Ft=n(222),Ut=n(176),zt=n(178),Nt=n(223),Tt=Object(z.a)(Dt.a)(xt||(xt=Object(D.a)(["\n  & .MuiPaper-root {\n    background-color: ",";\n    width: 450px;\n    margin: 0;\n    @media (max-width: 649px) {\n      width: 100%;\n    }\n    & h2 {\n      font-size: 1rem;\n    }\n  }\n  & label, input, div, button, p, h2 {\n    font-family: arial;\n  }\n"])),(function(e){return e.palette.secondary.main})),Lt=z.a.form(ft||(ft=Object(D.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]))),Bt=Object(z.a)(ne.a)(gt||(gt=Object(D.a)(["\n  width: 100%;\n  margin: 0;\n  @media (max-width: 649px) {\n    width: 100%;\n  }\n"])));function Wt(e){var t=Object(a.useContext)(C).palette,n=Object(a.useState)(!1),r=Object(l.a)(n,2),i=r[0],o=r[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),u=s[0],d=s[1],p=Object(a.useState)(""),m=Object(l.a)(p,2),j=m[0],h=m[1],b=function(e){"menu"===e.target.name?d(e.target.value||""):h(e.target.value||"")},x=function(){d(""),h(""),o(!1)};return Object(v.jsxs)("div",{children:[Object(v.jsx)(U.a,{disabled:e.disabled,onClick:function(){o(!0)},children:"incluir en otras cartas"}),e.product.name&&Object(v.jsxs)(Tt,{palette:t,disableBackdropClick:!0,open:i,onClose:x,children:[Object(v.jsxs)(Et.a,{children:["Selecciona Carta y Categor\xeda donde quieras incluir",Object(v.jsxs)("b",{children:[" ",oe(e.product.name)]})]}),Object(v.jsx)(Ft.a,{children:Object(v.jsxs)(Lt,{children:[Object(v.jsxs)(Bt,{children:[Object(v.jsx)(re.a,{htmlFor:"menu",children:"Carta"}),Object(v.jsx)(ae.a,{name:"menu",value:u,onChange:b,input:Object(v.jsx)(Ut.a,{id:"menu"}),children:e.otherMenus.map((function(e){return Object(v.jsx)(H.a,{style:{fontFamily:"arial"},value:e._id,children:oe(e.name)},e._id)}))})]}),Object(v.jsxs)(Bt,{disabled:!u,children:[Object(v.jsx)(re.a,{id:"category",children:"Categor\xeda"}),Object(v.jsx)(ae.a,{name:"category",value:j,onChange:b,input:Object(v.jsx)(Ut.a,{id:"category"}),children:e.otherCategories.filter((function(e){return e.inMenu===u})).map((function(e){return Object(v.jsx)(H.a,{style:{fontFamily:"arial"},value:e._id,children:oe(e.name)},e._id)}))}),Object(v.jsx)(zt.a,{children:"Selecciona una carta antes de asignar categor\xeda"})]})]})}),Object(v.jsxs)(Nt.a,{style:{margin:"2em 9px 7px"},children:[Object(v.jsx)(U.a,{onClick:function(){e.addCategory(j),d(""),h(""),o(!1)},color:"primary",variant:"contained",children:"aceptar"}),Object(v.jsx)(U.a,{onClick:x,color:"primary",style:{marginLeft:"19px"},children:"cancelar"})]})]})]})}var At,Rt=n(224),qt=Object(z.a)(Rt.a)(At||(At=Object(D.a)(["\n  margin: ",";\n"])),(function(e){return e.margin?e.margin:"200px 0 0"}));var Gt,Ht,Jt,Kt,Yt,Vt,Qt,Xt=function(e){return Object(v.jsx)(T.a,{container:!0,justify:"center",alignItems:"center",children:Object(v.jsx)(qt,{size:80,thickness:2.5,margin:e.margin})})},Zt=Object(z.a)(vt.a)(Gt||(Gt=Object(D.a)(["\n  background-color: rgba(0, 0, 0, 0.7);\n"]))),$t=Object(z.a)(yt.a)(Ht||(Ht=Object(D.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),en=z.a.form(Jt||(Jt=Object(D.a)(["\n  overflow-y: scroll;\n  max-height: 75vh;\n  background-color: ",";\n  border: 2px solid #000;\n  box-shadow: 4px 3px 5px -1px rgb(0 0 0 / 20%), 0px 5px 8px 0px rgb(0 0 0 / 14%), 0px 1px 14px 0px rgb(0 0 0 / 12%);\n  padding: 24px 24px 0;\n  max-width: 620px;\n  width: 90%;\n  display: flex;\n  flex-direction: column;\n  & > * {\n    margin-bottom: 24px;\n  }\n  .in-menu > span {\n    font-size: 0.875rem;\n  }\n  .other-menus-label {\n    font-size: 0.8rem;\n    margin: 0 0 30px;\n    text-align: center;\n  }\n  & label, input, span, button, p, legend, textarea {\n    font-family: arial;\n  }\n"])),(function(e){return e.palette.dark})),tn=Object(z.a)(T.a)(Kt||(Kt=Object(D.a)(["\n  height: 70px;\n  display: flex;\n  justify-content: center;\n"]))),nn=Object(z.a)(T.a)(Yt||(Yt=Object(D.a)(["\n  outline: "," dotted;\n  outline-offset: 5px;\n  outline-width: 2px;\n  margin-bottom: -8px;\n  padding: 0px 18px 5px 5px;\n"])),(function(e){return e.palette.primary.main})),rn=Object(z.a)(T.a)(Vt||(Vt=Object(D.a)(["\n  @media (max-width: 599px) {\n    margin: 10px 0 0 -30px;\n  }\n"]))),an=Object(z.a)(F.a)(Qt||(Qt=Object(D.a)(["\n  width: 36px;\n  margin-left: 10px;\n  & input {\n    padding-bottom: 3px;\n  }\n"]))),on=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).componentDidMount=function(){r.setState({showSpinner:!1})},r.handleInputChange=function(e){var t=e.target,n=t.name,a=t.value;r.setState({product:Object(S.a)(Object(S.a)({},r.state.product),{},Object(_.a)({},n,a))})},r.handleCheckboxChange=function(e){var t=r.state.product.allergies?Object(De.a)(r.state.product.allergies):[];e.target.checked?t.push(e.target.name):t.splice(t.findIndex((function(t){return t===e.target.name})),1),r.setState({product:Object(S.a)(Object(S.a)({},r.state.product),{},{allergies:t})})},r.handlePriceChange=function(e,t){var n=e.target,a=n.name,i=n.value,o=r.state.product.price?Object(De.a)(r.state.product.price):[{}];o[t][a]=i,r.setState({product:Object(S.a)(Object(S.a)({},r.state.product),{},{price:o})})},r.addPrice=function(){var e=Object(De.a)(r.state.product.price);e[e.length-1].subDescription?(e.push({subDescription:"",subPrice:0}),r.setState({product:Object(S.a)(Object(S.a)({},r.state.product),{},{price:e})})):r.props.showAlert("Debes rellenar el campo descriptivo del precio existente antes de agregar otro precio","error","bottom")},r.deletePrice=function(e){var t=Object(De.a)(r.state.product.price);t.length>1?(t.splice(e,1),r.setState({product:Object(S.a)(Object(S.a)({},r.state.product),{},{price:t})})):r.props.showAlert("Cada producto debe tener al menos un precio","error","bottom")},r.addCategory=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(S.a)({},r.state.product),e.next=3,ce(t);case 3:a=e.sent,n.categories.push({id:t,index:a}),r.setState({product:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.changeIsMenuProduct=function(e){var t=Object(S.a)({},r.state.product);t.isMenuProduct=e.target.checked,r.setState({product:t})},r.submitForm=function(e,t){r.props.submitForm(e,t),r.setState({showSpinner:!0})},r.state={product:e.product},r}return Object(j.a)(n,[{key:"render",value:function(){var e,t,n,r,a,i,o,c,s,u,d,l,p,m,j,h=this,b=this.context.palette,x=(m=this.state.product,j=this.props.otherCategories,this.props.otherMenus.filter((function(e){return!j.some((function(t){return t.inMenu===e._id&&m.categories.some((function(e){return e.id===t._id}))}))})));return Object(v.jsx)($t,{open:this.props.open,onClose:this.props.handleClose,closeAfterTransition:!0,BackdropComponent:Zt,BackdropProps:{timeout:500},children:Object(v.jsx)(wt.a,{in:this.props.open,children:Object(v.jsx)(en,{palette:b,autoComplete:"off",onSubmit:function(e){return h.submitForm(e,h.state.product)},children:this.state.showSpinner?Object(v.jsx)(Xt,{margin:"0"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(T.a,{container:!0,justify:"space-between",children:[" ",Object(v.jsx)(F.a,{required:!0,autoFocus:!this.state.product.name,variant:"outlined",name:"name",label:"Nombre del producto",type:"text",value:this.state.product.name?this.state.product.name:"",onChange:this.handleInputChange,style:{width:"80%"}}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 11px 5px 0",height:"fit-content",margin:"-8px"},onClick:this.props.handleClose,color:"primary",endIcon:Object(v.jsx)(_t.a,{style:{fontSize:"25px"}})})]}),Object(v.jsxs)(nn,{palette:b,children:[" ",Object(v.jsx)(Ct.a,{component:"legend",style:{fontSize:"0.8rem",margin:"0 0 -5px -5px"},children:"Precios"}),Object(v.jsx)(Ee.a,{style:{margin:"10px -23px 0 -10px",backgroundColor:b.primary.main+"0.3"}}),this.state.product.price.map((function(e,t){return Object(v.jsxs)("div",{children:[Object(v.jsxs)(T.a,{container:!0,justify:"space-between",style:{margin:"12px 0 0"},children:[Object(v.jsx)(T.a,{item:!0,xs:12,sm:7,children:Object(v.jsx)(F.a,{fullWidth:!0,name:"subDescription",label:"Cantidad o raci\xf3n",type:"text",helperText:"media raci\xf3n o raci\xf3n entera, copa de vino o botella, etc.",value:e.subDescription?e.subDescription:"",onChange:function(e){return h.handlePriceChange(e,t)}})}),Object(v.jsx)(T.a,{item:!0,xs:12,sm:5,children:Object(v.jsxs)(rn,{container:!0,justify:"space-between",children:[Object(v.jsx)(T.a,{item:!0,xs:8,style:{margin:"7px 0 -5px 30px"},children:Object(v.jsx)(F.a,{required:!0,variant:"outlined",name:"subPrice",label:"Precio",type:"number",InputProps:{startAdornment:Object(v.jsx)(Pt.a,{position:"start",children:"\u20ac"})},value:e.subPrice,onChange:function(e){return h.handlePriceChange(e,t)}})}),Object(v.jsx)(tn,{item:!0,xs:1,children:Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 27px 5px 15px",height:"fit-content",margin:"auto"},onClick:function(){return h.deletePrice(t)},color:"primary",endIcon:Object(v.jsx)(Ae.a,{style:{fontSize:"25px"}})})})]})})]}),Object(v.jsx)(Ee.a,{style:{margin:"10px -23px 0 -10px",backgroundColor:b.primary.main+"0.3"}})]},t)})),Object(v.jsx)(T.a,{container:!0,justify:"flex-start",style:{margin:"10px 0 0"},children:Object(v.jsx)(U.a,{size:"small",variant:"outlined",color:"primary",startIcon:Object(v.jsx)(Ue.a,{}),onClick:this.addPrice,children:"agregar precio"})})]}),Object(v.jsx)(F.a,{name:"description",style:{marginTop:"30px"},label:"Descripci\xf3n (opcional)",type:"text",multiline:!0,value:this.state.product.description?this.state.product.description:"",onChange:this.handleInputChange}),Object(v.jsxs)(E.a,{children:[" ","M\xednimo",Object(v.jsx)(an,{size:"small",name:"minPortions",type:"number",value:this.state.product.minPortions,onChange:function(e){return h.handleInputChange(e)}}),this.state.product.minPortions>1?" raciones":" raci\xf3n"]}),Object(v.jsxs)(ne.a,{component:"fieldset",style:{outline:"dotted",outlineOffset:"5px",outlineColor:b.primary.main,outlineWidth:"2px"},children:[Object(v.jsx)(Ct.a,{component:"legend",style:{fontSize:"0.8rem"},children:"Contiene (opcional)"}),Object(v.jsxs)(kt.a,{row:!0,style:{paddingLeft:"6px"},children:[Object(v.jsxs)(T.a,{container:!0,justify:"space-between",children:[Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(e=this.state.product.allergies)||void 0===e?void 0:e.some((function(e){return"Gluten"===e})),onChange:this.handleCheckboxChange,name:"Gluten"}),label:"Gluten"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(t=this.state.product.allergies)||void 0===t?void 0:t.some((function(e){return"Crust\xe1ceos"===e})),onChange:this.handleCheckboxChange,name:"Crust\xe1ceos"}),label:"Crust\xe1ceos"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(n=this.state.product.allergies)||void 0===n?void 0:n.some((function(e){return"Huevos"===e})),onChange:this.handleCheckboxChange,name:"Huevos"}),label:"Huevos"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(r=this.state.product.allergies)||void 0===r?void 0:r.some((function(e){return"Apio"===e})),onChange:this.handleCheckboxChange,name:"Apio"}),label:"Apio"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(a=this.state.product.allergies)||void 0===a?void 0:a.some((function(e){return"Sulfitos"===e})),onChange:this.handleCheckboxChange,name:"Sulfitos"}),label:"Sulfitos"})]}),Object(v.jsxs)(T.a,{container:!0,justify:"space-between",children:[Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(i=this.state.product.allergies)||void 0===i?void 0:i.some((function(e){return"L\xe1cteos"===e})),onChange:this.handleCheckboxChange,name:"L\xe1cteos"}),label:"L\xe1cteos"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(o=this.state.product.allergies)||void 0===o?void 0:o.some((function(e){return"Cacahuetes"===e})),onChange:this.handleCheckboxChange,name:"Cacahuetes"}),label:"Cacahuetes"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(c=this.state.product.allergies)||void 0===c?void 0:c.some((function(e){return"Mostaza"===e})),onChange:this.handleCheckboxChange,name:"Mostaza"}),label:"Mostaza"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(s=this.state.product.allergies)||void 0===s?void 0:s.some((function(e){return"Frutos de c\xe1scara"===e})),onChange:this.handleCheckboxChange,name:"Frutos de c\xe1scara"}),label:"Frutos de c\xe1scara"})]}),Object(v.jsxs)(T.a,{container:!0,justify:"space-between",children:[Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(u=this.state.product.allergies)||void 0===u?void 0:u.some((function(e){return"Granos de s\xe9samo"===e})),onChange:this.handleCheckboxChange,name:"Granos de s\xe9samo"}),label:"Granos de s\xe9samo"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(d=this.state.product.allergies)||void 0===d?void 0:d.some((function(e){return"Soja"===e})),onChange:this.handleCheckboxChange,name:"Soja"}),label:"Soja"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(l=this.state.product.allergies)||void 0===l?void 0:l.some((function(e){return"Moluscos"===e})),onChange:this.handleCheckboxChange,name:"Moluscos"}),label:"Moluscos"}),Object(v.jsx)(Mt.a,{control:Object(v.jsx)(St.a,{color:"primary",size:"small",checked:null===(p=this.state.product.allergies)||void 0===p?void 0:p.some((function(e){return"Altramuces"===e})),onChange:this.handleCheckboxChange,name:"Altramuces"}),label:"Altramuces"})]})]})]}),Object(v.jsxs)(T.a,{container:!0,justify:"space-around",children:[" ",Object(v.jsx)(Wt,{addCategory:function(e){return h.addCategory(e)},otherMenus:x,otherCategories:this.props.otherCategories,product:this.state.product,disabled:!x.length}),Object(v.jsx)(Mt.a,{disabled:this.state.product.isMenuProduct,style:{marginRight:"0"},className:"in-menu",label:"DISPONIBLE EN MEN\xdaS",control:Object(v.jsx)(St.a,{size:"small",color:"primary",checked:this.state.product.isMenuProduct,onChange:this.changeIsMenuProduct})}),Object(v.jsx)(Ct.a,{component:"legend",className:"other-menus-label",children:this.props.otherMenus&&"Usa estas opciones para reusar este producto en otras cartas o men\xfas"})]}),Object(v.jsxs)(T.a,{container:!0,justify:"center",children:[" ",Object(v.jsx)(U.a,{style:{marginRight:"20px"},variant:"contained",color:"primary",type:"submit",children:"guardar"}),Object(v.jsx)(U.a,{color:"primary",onClick:this.props.handleClose,children:"salir sin guardar"})]})]})})})})}}]),n}(a.Component);on.contextType=C;var cn,sn=on,un=z.a.div(cn||(cn=Object(D.a)(["\n  margin: 28px 0 35px;\n  width: 100%;\n  max-width: 548px;\n  & label, input {\n    font-family: arial;\n  }\n"])));var dn,ln,pn=function(e){var t=e.addCategory,n=Object(a.useState)(""),r=Object(l.a)(n,2),i=r[0],o=r[1],c=function(e,n){t(e,n),o("")};return Object(v.jsx)(un,{children:Object(v.jsxs)(T.a,{container:!0,justify:"center",alignItems:"center",spacing:3,children:[Object(v.jsx)(T.a,{item:!0,xs:10,sm:6,children:Object(v.jsx)("form",{onSubmit:function(e){return c(e,i)},autoComplete:"off",children:Object(v.jsx)(F.a,{fullWidth:!0,autoFocus:!1,variant:"outlined",size:"small",label:"Nombre",type:"text",value:i,onChange:function(e){return o(e.target.value)}})})}),Object(v.jsx)(T.a,{item:!0,xs:10,sm:6,children:Object(v.jsx)(T.a,{container:!0,justify:"flex-end",children:Object(v.jsx)(X,{onClick:function(e){return c(e,i)},startIcon:Object(v.jsx)(Ue.a,{}),children:"Nueva categor\xeda"})})})]})})},mn=Object(z.a)(T.a)(dn||(dn=Object(D.a)(["\n  height: 80px;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  flex-wrap: nowrap;\n  background-color: ",";\n  @media (max-width: 1067px) {\n    height: 60px;\n    padding-bottom: 5px;\n  }\n  .select {\n    min-width: 100px;\n    margin: 0 10px;\n    @media (max-width: 1067px) {\n      display: none;\n    }\n    & label {\n      font-family: arial;\n    }\n  }\n  .colors {\n    & .MuiInputBase-input {\n      font-family: arial;\n    }\n  }\n"])),(function(e){return e.palette.dark+"cc"})),jn=Object(z.a)(X)(ln||(ln=Object(D.a)(["\n  margin: 0 20px;\n  min-width: fit-content;\n  @media (max-width: 375px) {\n    margin: 0 10px;\n    min-width: fit-content;\n  }\n  @media (max-width: 332px) {\n    margin: 0 5px;\n    min-width: fit-content;\n  }\n"])));var hn,bn,xn=function(e){for(var t,n,r=Object(a.useContext)(C),i=r.theme,o=r.palette,c=r.font,s=r.changePalette,u=r.changeFont,d=[],p=0,m=Object.entries(i.palette);p<m.length;p++){var j=Object(l.a)(m[p],2),h=j[0],b=j[1];d.push(h),b===o&&(t=h)}for(var x=[],f=0,g=Object.entries(i.font);f<g.length;f++){var O=Object(l.a)(g[f],2),y=O[0],w=O[1];x.push(y),w===c&&(n=y)}var P=function(e){"palette"===e.target.name?s(e.target.value):u(e.target.value)};return Object(v.jsxs)(mn,{palette:o,container:!0,justify:"center",alignItems:"center",children:[Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(jn,{variant:"contained",color:"primary",onClick:function(){return e.previewMenu()},children:"vista previa de Carta"})}),Object(v.jsxs)(ne.a,{variant:"outlined",size:"small",className:"select colors",children:[Object(v.jsx)(re.a,{children:"Colores"}),Object(v.jsx)(ae.a,{name:"palette",value:t,onChange:P,label:"Esquema de colores",children:d.map((function(e){return Object(v.jsx)(H.a,{value:e,style:{background:"linear-gradient(217deg, ".concat(i.palette[e].dark,", ").concat(i.palette[e].primary.main,")")},children:oe(e)},e)}))})]}),Object(v.jsxs)(ne.a,{variant:"outlined",size:"small",className:"select",children:[Object(v.jsx)(re.a,{children:"Tipograf\xeda"}),Object(v.jsx)(ae.a,{name:"font",value:n,onChange:P,label:"Tipograf\xeda",children:x.map((function(e){return Object(v.jsx)(H.a,{value:e,style:{fontFamily:i.font[e]},children:oe(e)},e)}))})]}),Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(jn,{variant:"contained",color:"primary",onClick:function(){return e.goBack()},children:"volver"})})]})},fn=n(232),gn=n(230),On=z.a.div(hn||(hn=Object(D.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  background-color: #0000008a;\n  z-index: 1399;\n"]))),vn=Object(z.a)(gn.a)(bn||(bn=Object(D.a)(["\n  & svg {\n    margin: auto 5px auto 0;\n  }\n  & .MuiAlert-message {\n    font-family: arial;\n  }\n"])));var yn,wn,Cn,Pn,kn,Mn=function(e){return Object(v.jsxs)(v.Fragment,{children:[e.open&&Object(v.jsx)(On,{}),Object(v.jsx)(fn.a,{anchorOrigin:e.anchorOrigin,open:e.open,onClose:function(){return e.closeAlert(e.message,e.severity)},style:{margin:"95px 0"},children:Object(v.jsx)(vn,{severity:e.severity,variant:"filled",action:"warning"===e.severity&&Object(v.jsx)(U.a,{color:"inherit",size:"small",style:{fontFamily:"arial"},onClick:function(){e.category?e.deleteProduct(e.i,e.category,e.id):e.id?e.deleteCategory(e.i,e.id):e.deleteMenu()},children:"aceptar"}),children:e.message})})]})},Sn=z.a.div(yn||(yn=Object(D.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  width: ",";\n  margin: ",";\n  @media (max-width: 1067px) {\n    width: 100%;\n    align-items: center;\n  }\n"])),(function(e){return e.width}),(function(e){return e.margin||"30px auto 0"})),In=z.a.form(wn||(wn=Object(D.a)(["\n  width: 500px;\n  margin: -17px 80px 0 0;\n  @media (max-width: 1067px) {\n    width: 100%;\n    margin: -17px 0 0;\n  }\n"]))),_n=Object(z.a)(T.a)(Cn||(Cn=Object(D.a)(["\n  padding-left: 50px;\n  @media (max-width: 1067px) {\n    padding: 0 15px;\n  }\n  & input, label {\n    font-family: arial;\n  }\n"]))),Dn=Object(z.a)(E.a)(Pn||(Pn=Object(D.a)(["\n  padding: 0 65px;\n  font-weight: 400;\n  @media (max-width: 1067px) {\n    padding-left: 18px;\n  }\n"]))),En=Object(z.a)(T.a)(kn||(kn=Object(D.a)(["\n  margin: "," auto 0;\n  width: 1008px;\n  font-style: ",";\n  @media (max-width: 1067px) {\n    width: 100%;\n    max-width: 548px;\n    justify-content: space-between;\n    align-items: flex-end;\n    flex-wrap: nowrap;\n  }\n"])),(function(e){return e.margintop||"0"}),(function(e){return e.fontStyle})),Fn=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.category,n=e.products,r=e.index,a=e.showConfirmationMessage,i=e.editCategory,o=e.openProductForm,c=e.showProductTooltip,s=e.hideProductTooltip;return Object(v.jsx)(mt,{category:t,products:n,index:r,showConfirmationMessage:a,editCategory:i,openProductForm:o,showProductTooltip:c,hideProductTooltip:s})}}]),n}(a.PureComponent),Un=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).componentDidMount=Object(p.a)(d.a.mark((function e(){var t,n,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.menuService.getCategories();case 3:return t=e.sent.data.message,e.next=6,r.menuService.getProducts();case 6:n=e.sent.data.message,a=t.filter((function(e){return e.inMenu===r.props.menu._id})),i=t.filter((function(e){return e.inMenu!==r.props.menu._id})),r.setState({categories:a,products:n,otherCategories:i}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),r.showAlert=function(e,t,n){r.setState({alert:{open:!0,message:e,severity:t,vertical:n}})},r.closeAlert=function(e,t){r.setState({alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1,message:e,severity:t})})},r.onDragEnd=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a,i,o,c,s,u,l,p,m,j,h,b,x,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.destination,a=t.source,i=t.draggableId,o=t.type,c=function(e,t){return e.categories.find((function(e){return e.id===t})).index},n&&(n.droppableId!==a.droppableId||n.index!==a.index)){e.next=4;break}return e.abrupt("return");case 4:"category"===o?(s=Object(De.a)(r.state.categories),u=a.index+1,l=n.index+1,s.forEach((function(e,t,n){l>u?l>=e.index&&e.index>u&&n[t].index--:l<=e.index&&e.index<u&&n[t].index++,e._id===i&&(n[t].index=l)})),r.setState({categories:s},(function(){return r.updateDBWithChanges(s)}))):a.droppableId===n.droppableId?(p=a.droppableId,(m=r.state.products.filter((function(e){return e.categories.some((function(e){return e.id===p}))}))).forEach((function(e,t,r){n.index>a.index?n.index>=c(e,p)&&c(e,p)>a.index&&r[t].categories.find((function(e){return e.id===p})).index--:n.index<=c(e,p)&&c(e,p)<a.index&&r[t].categories.find((function(e){return e.id===p})).index++,e._id===i&&(r[t].categories.find((function(e){return e.id===p})).index=n.index)})),j=[].concat(Object(De.a)(m),Object(De.a)(r.state.products.filter((function(e){return e.categories.every((function(e){return e.id!==p}))})))),r.setState({products:j},(function(){return r.updateDBWithChanges(null,m)}))):(h=r.state.products.filter((function(e){return e.categories.some((function(e){return e.id===a.droppableId}))})),b=r.state.products.filter((function(e){return e.categories.some((function(e){return e.id===n.droppableId}))})),h.forEach((function(e,t,r){c(e,a.droppableId)>a.index&&r[t].categories.find((function(e){return e.id===a.droppableId})).index--,e._id===i&&(r[t].categories.find((function(e){return e.id===a.droppableId})).id=n.droppableId,n.index?r[t].categories.find((function(e){return e.id===n.droppableId})).index=n.index:r[t].categories.find((function(e){return e.id===n.droppableId})).index=1)})),b.forEach((function(e,t,r){n.index<=c(e,n.droppableId)&&r[t].categories.find((function(e){return e.id===n.droppableId})).index++})),x=[].concat(Object(De.a)(b),Object(De.a)(h)),f=[].concat(Object(De.a)(x),Object(De.a)(r.state.products.filter((function(e){return e.categories.every((function(e){return e.id!==a.droppableId&&e.id!==n.droppableId}))})))),r.setState({products:f},(function(){return r.updateDBWithChanges(null,x)})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.updateDBWithChanges=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,n);case 2:(a=e.sent)?r.setState({alert:a}):r.closeProductForm();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.showConfirmationMessage=function(e,t,n){t?r.setState({alert:{open:!0,message:"\xbfSeguro que quieres borrar ".concat(n?"el producto?":"la categor\xeda? Tambi\xe9n se borrar\xe1n los productos que contenga, si es que los hay."),severity:"warning",vertical:"top",i:e,id:t,category:n}}):r.setState({alert:{open:!0,message:"\xbfSeguro que quieres borrar la carta? Tambi\xe9n se borrar\xe1 todo su contenido.",severity:"warning",vertical:"top"}})},r.toggleMenuInput=function(){r.state.showMenuInput||(window.addEventListener("mousedown",r.handleClick),window.addEventListener("keypress",r.handleEnter),r.setState({showMenuInput:!0}))},r.handleClick=function(e){"name"!==e.target.name&&"description"!==e.target.name&&r.MenuInputSubmit()},r.handleEnter=function(e){"Enter"===e.key&&r.MenuInputSubmit()},r.handleMenuInputChange=function(e){var t=e.target,n=t.value,a=t.name;r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},Object(_.a)({},a,n))})},r.MenuInputSubmit=function(){r.props.otherMenus.some((function(e){return e.name.toUpperCase()===r.state.menu.name.toUpperCase()}))?(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},{name:r.props.menu.name}),showMenuInput:!1,alert:{open:!0,severity:"error",message:"Ya existe una carta con el nombre ".concat(r.state.menu.name.toUpperCase()),vertical:"bottom"}})):""===r.state.menu.name?(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},{name:r.props.menu.name}),showMenuInput:!1,alert:{open:!0,severity:"error",message:"No puedes dejar el nombre de la carta en blanco",vertical:"bottom"}})):(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.props.editMenu(r.state.menu),r.setState({showMenuInput:!1}))},r.deleteCategory=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a,i,o,c,s,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(De.a)(r.state.categories),i=r.state.products.filter((function(e){return e.categories.some((function(e){return e.id===a[t]._id}))})),o=i.filter((function(e){return 1!==e.categories.length})),c=i.filter((function(e){return 1===e.categories.length})),s=r.state.products.filter((function(e){return e.category!==a[t]._id})),o.forEach((function(e){return e.categories.splice(e.categories.findIndex((function(e){return e.id===n})),1)})),a.forEach((function(e,n,r){e.index>t&&r[n].index--})),a.splice(t,1),Promise.all(o.map((function(e){return r.menuService.updateProduct(e._id,e)}))),Promise.all(c.map((function(e){return r.menuService.deleteProduct(e._id)}))),e.next=13,r.menuService.deleteCategory(n);case 13:u=e.sent,r.setState({categories:a,products:s,alert:{open:!0,severity:"success",message:"La categor\xeda ".concat(u.data.name.toUpperCase()," ha sido eliminado de la base de datos"),vertical:"bottom"}}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),r.editCategory=function(e){if(void 0!==e.name){var t=Object(De.a)(r.state.categories).filter((function(t){return t._id!==e._id}));t.some((function(t){return t.name.toUpperCase()===e.name.toUpperCase()}))?r.setState({alert:{open:!0,severity:"error",message:"La categor\xeda ".concat(e.name.toUpperCase()," ya existe"),vertical:"bottom"}}):""===e.name?r.setState({alert:{open:!0,severity:"error",message:"No puedes dejar el nombre de la categor\xeda en blanco",vertical:"bottom"}}):(t.push(e),r.setState({categories:t},(function(){return r.updateDBWithChanges([e])})))}},r.addCategory=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!r.state.categories.some((function(e){return e.name.toUpperCase()===n.toUpperCase()}))){e.next=5;break}r.setState({alert:{open:!0,severity:"error",message:"La categor\xeda ".concat(n.toUpperCase()," ya existe"),vertical:"bottom"}}),e.next=21;break;case 5:if(n){e.next=9;break}r.setState({alert:{open:!0,severity:"error",message:"Indica el nombre de la nueva categor\xeda",vertical:"bottom"}}),e.next=21;break;case 9:return e.prev=9,e.next=12,r.menuService.addCategory({name:n,inMenu:r.props.menu._id});case 12:a=e.sent,(i=Object(De.a)(r.state.categories)).push(a.data),r.setState({categories:i}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 21:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}(),r.deleteProduct=function(){var e=Object(p.a)(d.a.mark((function e(t,n,a){var i,o,c,s,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==(o=r.state.products.find((function(e){return e._id===a}))).categories.length||o.isMenuProduct){e.next=9;break}return e.next=5,r.menuService.deleteProduct(a);case 5:c=e.sent,i="El producto ".concat(c.data.name.toUpperCase()," ha sido eliminado de la base de datos"),e.next=14;break;case 9:return o.categories.splice(o.categories.findIndex((function(e){return e.id===n})),1),e.next=12,r.menuService.updateProduct(a,o);case 12:s=e.sent,i="El producto ".concat(s.data.name.toUpperCase()," ha sido eliminado de esta carta");case 14:u=r.state.products.filter((function(e){return e.categories.some((function(e){return e.id===n}))&&e._id!==a})),l=r.state.products.filter((function(e){return e.categories.every((function(e){return e.id!==n}))})),u.forEach((function(e,r,a){e.categories.find((function(e){return e.id===n})).index>t&&a[r].categories.find((function(e){return e.id===n})).index--})),r.setState({products:u.concat(l),alert:{open:!0,severity:"success",message:i,vertical:"bottom"}}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.openProductForm=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,ce(n);case 3:a=e.sent,r.setState({openModal:!0,modalProduct:{categories:[{id:n,index:a}],allergies:[],minPortions:1,price:[{subDescription:"",subPrice:0}]},productFormKey:r.state.productFormKey+1}),e.next=8;break;case 7:r.setState({openModal:!0,modalProduct:t});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.submitProductForm=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Object(De.a)(r.state.products),n.price.length>1&&((i=n.price[n.price.length-1]).subDescription&&i.subPrice||n.price.splice(-1,1)),!n._id){e.next=8;break}(a=a.filter((function(e){return e._id!==n._id}))).some((function(e){return e.name.toUpperCase()===n.name.toUpperCase()}))?r.setState({alert:{open:!0,severity:"error",message:"El producto ".concat(n.name.toUpperCase()," ya existe"),vertical:"bottom"}}):(a.push(n),r.setState({products:a},(function(){return r.updateDBWithChanges(null,[n])}))),e.next=23;break;case 8:if(!r.state.products.some((function(e){return e.name.toUpperCase()===n.name.toUpperCase()}))){e.next=12;break}r.setState({alert:{open:!0,severity:"error",message:"El producto ".concat(n.name.toUpperCase()," ya existe"),vertical:"bottom"}}),e.next=23;break;case 12:return e.prev=12,e.next=15,r.menuService.addProduct(n);case 15:o=e.sent,a.push(o.data),r.setState({products:a},r.closeProductForm()),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(12),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 23:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t,n){return e.apply(this,arguments)}}(),r.closeProductForm=function(){r.setState({openModal:!1,modalProduct:null})},r.showProductTooltip=function(e){r.setState({showProductTooltip:!0,tooltipProduct:e})},r.hideProductTooltip=function(){r.setState({showProductTooltip:!1})},r.previewMenu=function(){r.setState({previewMenu:!0})},r.closePreview=function(){r.setState({previewMenu:!1})},r.goBack=function(){r.props.deselectMenu()},r.state={menu:e.menu,showMenuInput:!1,categories:void 0,products:void 0,openModal:!1,modalProduct:null,productFormKey:0,showProductTooltip:!1,tooltipProduct:void 0,previewMenu:!1,alert:{open:!1,message:"",severity:void 0,vertical:"bottom"}},r.menuService=new ie,r}return Object(j.a)(n,[{key:"render",value:function(){var e,t,n=this,r=this.context.palette;return Object(v.jsxs)(v.Fragment,{children:[this.state.categories?this.state.previewMenu?Object(v.jsx)(He,{menu:Object(S.a)({},this.state.menu),categories:Object(De.a)(this.state.categories),products:this.state.products.filter((function(e){return e.categories.some((function(e){return n.state.categories.some((function(t){return t._id===e.id}))}))})),close:this.closePreview}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(En,{container:!0,justify:"flex-start",children:[this.state.showMenuInput?Object(v.jsxs)(In,{autoComplete:"off",children:[Object(v.jsxs)(_n,{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[Object(v.jsx)(T.a,{item:!0,xs:7,style:{marginRight:"24px"},children:Object(v.jsx)(F.a,{fullWidth:!0,name:"name",label:"Nombre de la Carta",type:"text",autoFocus:!0,value:this.state.menu.name,onChange:this.handleMenuInputChange})}),Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(U.a,{variant:"outlined",color:"primary",style:{fontFamily:"arial"},children:"guardar"})})]}),Object(v.jsx)(_n,{container:!0,justify:"space-between",alignItems:"flex-end",children:Object(v.jsx)(T.a,{item:!0,xs:12,children:Object(v.jsx)(F.a,{style:{width:"99%",marginTop:"10px"},name:"description",label:"Descripci\xf3n",type:"text",value:this.state.menu.description,onChange:this.handleMenuInputChange})})})]}):Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(Dn,{variant:"h5",children:oe(this.props.menu.name)})}),!this.state.showMenuInput&&Object(v.jsx)(T.a,{item:!0,style:{paddingRight:"10px"},children:Object(v.jsxs)(T.a,{container:!0,wrap:"nowrap",children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return n.toggleMenuInput()},endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return n.showConfirmationMessage()},endIcon:Object(v.jsx)(Ae.a,{})})]})})]}),!this.state.showMenuInput&&this.props.menu.description&&Object(v.jsx)(En,{container:!0,justify:"flex-start",fontStyle:"italic",children:Object(v.jsx)(Dn,{variant:"h6",children:this.props.menu.description.slice(0,1).toUpperCase()+this.props.menu.description.slice(1)})}),Object(v.jsx)(xn,{goBack:function(){return n.goBack()},previewMenu:function(){return n.previewMenu()}}),Object(v.jsx)(Be.a,{onDragEnd:this.onDragEnd,children:Object(v.jsx)(Be.c,{droppableId:"menu",type:"category",children:function(e){return Object(v.jsxs)(Sn,Object(S.a)(Object(S.a)({width:"1008px"},e.droppableProps),{},{ref:e.innerRef,children:[n.state.categories.sort((function(e,t){return e.index-t.index})).map((function(e,t){var r=n.state.products.filter((function(t){return t.categories.some((function(t){return t.id===e._id}))}));return Object(v.jsx)(Fn,{category:e,products:r,index:t,showConfirmationMessage:function(e,t,r){return n.showConfirmationMessage(e,t,r)},editCategory:function(e,t){return n.editCategory(e,t)},openProductForm:function(e,t){return n.openProductForm(e,t)},showProductTooltip:function(e){return n.showProductTooltip(e)},hideProductTooltip:function(){return n.hideProductTooltip()}},e._id)})),e.placeholder]}))}})}),Object(v.jsx)(Sn,{width:"1008px",margin:"0 auto",children:Object(v.jsx)(pn,{addCategory:function(e,t){return n.addCategory(e,t)}})}),this.state.showProductTooltip?Object(v.jsx)(Ot,{menuDescription:!!this.props.menu.description,product:this.state.tooltipProduct},this.state.tooltipProduct._id):(null===(e=this.state.products)||void 0===e?void 0:e.some((function(e){return e.categories.some((function(e){return n.state.categories.some((function(t){return t._id===e.id}))}))})))&&Object(v.jsxs)(jt,{menuDescription:!!this.props.menu.description,palette:r,padding:"20px",font:"arial",children:[Object(v.jsx)(E.a,{variant:"h6",children:Object(v.jsx)("i",{children:"Pasa el rat\xf3n sobre el producto que quieras para ver sus detalles."})}),Object(v.jsx)(Ee.a,{style:{margin:"10px -20px 15px -20px"}}),Object(v.jsxs)(E.a,{variant:"subtitle1",children:["Usa los botones que hay a la derecha de los nombres de carta, categor\xeda y producto, para ",Object(v.jsx)(qe.a,{color:"primary",fontSize:"small",style:{margin:"0 5px -5px 5px"}}),"editar y",Object(v.jsx)(Ae.a,{color:"primary",fontSize:"small",style:{margin:"0 5px -5px 5px"}}),"borrar."]})]})]}):Object(v.jsx)(Xt,{}),this.state.openModal&&Object(v.jsx)(sn,{open:this.state.openModal,handleClose:function(){return n.closeProductForm()},submitForm:function(e,t){return n.submitProductForm(e,t)},showAlert:function(e,t,r){return n.showAlert(e,t,r)},product:this.state.modalProduct,otherCategories:this.state.otherCategories,otherMenus:this.props.otherMenus},(null===(t=this.state.modalProduct)||void 0===t?void 0:t._id)?"edit"+this.state.modalProduct._id:this.state.productFormKey),Object(v.jsx)(Mn,{anchorOrigin:{vertical:this.state.alert.vertical,horizontal:"center"},open:this.state.alert.open,message:this.state.alert.message,severity:this.state.alert.severity,i:this.state.alert.i,id:this.state.alert.id,category:this.state.alert.category,closeAlert:function(e,t){return n.closeAlert(e,t)},deleteProduct:function(e,t,r){return n.deleteProduct(e,t,r)},deleteCategory:function(e,t){return n.deleteCategory(e,t)},deleteMenu:function(){return n.props.deleteMenu(n.state.products)}})]})}}]),n}(a.Component);Un.contextType=C;var zn=Un,Nn=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).deleteProduct=function(){e.props.removeProduct(e.props.index,e.props.categoryIndex)},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.context.palette;return Object(v.jsx)(Be.b,{draggableId:this.props.product.name,index:this.props.index,children:function(n,r){return Object(v.jsxs)(Je,Object(S.a)(Object(S.a)(Object(S.a)({palette:t},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,isDragging:r.isDragging,children:[Object(v.jsx)(E.a,{variant:"h6",noWrap:!0,children:oe(e.props.product.name)}),Object(v.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 12px",fontFamily:"arial"},onClick:e.deleteProduct,color:"primary",endIcon:Object(v.jsx)(Ae.a,{}),children:"quitar"}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0",fontFamily:"arial"},onClick:function(){return e.props.openProductForm(e.props.product._id)},color:"primary",endIcon:Object(v.jsx)(qe.a,{})})]})]}))}})}}]),n}(a.Component);Nn.contextType=C;var Tn,Ln=Nn,Bn=Object(z.a)(T.a)(Tn||(Tn=Object(D.a)(["\n  margin: 10px 0 5px 5px;\n  & form {\n    transform: scale(0.9);\n  }\n  & .MuiButton-label {\n    font-size: 0.75rem;\n    justify-content: flex-start;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n  & label, input {\n    font-family: arial;\n  }\n"])));var Wn,An=function(e){var t=e.addMenuProduct,n=Object(a.useState)(""),r=Object(l.a)(n,2),i=r[0],o=r[1],c=function(e,n){t(e,n),o("")};return Object(v.jsxs)(Bn,{container:!0,alignItems:"center",children:[Object(v.jsx)(T.a,{item:!0,xs:6,children:Object(v.jsx)("form",{onSubmit:function(e){return c(e,i)},autoComplete:"off",children:Object(v.jsx)(F.a,{fullWidth:!0,autoFocus:!1,variant:"outlined",size:"small",label:"Nombre",type:"text",value:i,onChange:function(e){return o(e.target.value)}})})}),Object(v.jsx)(T.a,{item:!0,xs:6,children:Object(v.jsx)(T.a,{container:!0,justify:"center",children:Object(v.jsx)(X,{size:"small",color:"primary",onClick:function(e){return c(e,i)},startIcon:Object(v.jsx)(Ue.a,{}),children:"Nuevo producto"})})})]})},Rn=Object(z.a)(Mt.a)(Wn||(Wn=Object(D.a)(["\n  transform: scale(0.9);\n  margin: ",";\n  @media (max-width: 1067px) {\n    margin-left: -11px;\n  }\n  & span {\n    font-family: arial;\n  }\n"])),(function(e){return e.margin})),qn=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).componentDidUpdate=function(e){r.props!==e&&r.setState({category:r.props.category})},r.toggleInput=function(){r.state.showCategoryInput||(window.addEventListener("mousedown",r.handleClick),window.addEventListener("keypress",r.handleEnter),r.setState({showCategoryInput:!0}))},r.handleClick=function(e){"categoryName"!==e.target.name&&"categoryDescription"!==e.target.name&&r.inputSubmit()},r.handleEnter=function(e){"Enter"===e.key&&r.inputSubmit()},r.handleInputChange=function(e){var t=e.target,n=t.value,a=t.name;r.setState({category:Object(S.a)(Object(S.a)({},r.state.category),{},Object(_.a)({},a,n))})},r.handleCheckboxChange=function(e,t){var n=Object(S.a)({},r.state.category);n[t]="determinesPrice"===t?e.target.checked:!e.target.checked,r.setState({category:n},(function(){return r.inputSubmit(t)}))},r.inputSubmit=function(e){r.state.showCategoryInput?(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.props.editCategory(r.state.category),r.setState({showCategoryInput:!1})):r.props.editCategory(r.state.category,"determinesPrice"===e||null)},r.componentDidUpdate=function(e,t){r.state.showCategoryInput!==t.showCategoryInput&&r.props.category.categoryName===e.category.categoryName&&r.setState({category:Object(S.a)(Object(S.a)({},r.state.category),{},{categoryName:r.props.category.categoryName})})},r.state={category:e.category,showCategoryInput:!1,mobile:!(window.screen.width>1067)},r}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.context.palette,n=this.props,r=n.category,a=n.index,i=n.showConfirmationMessage,o=n.removeProduct,c=n.addMenuProduct,s=n.openProductForm;return Object(v.jsx)(v.Fragment,{children:r.products&&Object(v.jsx)(Be.b,{draggableId:r._id,index:a,children:function(n){return Object(v.jsxs)(nt,Object(S.a)(Object(S.a)({palette:t},n.draggableProps),{},{ref:n.innerRef,children:[Object(v.jsxs)(rt,Object(S.a)(Object(S.a)({},n.dragHandleProps),{},{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[e.state.showCategoryInput?Object(v.jsxs)(ct,{autoComplete:"off",children:[Object(v.jsxs)(T.a,{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[Object(v.jsx)(T.a,{item:!0,xs:7,style:{marginRight:"24px"},children:Object(v.jsx)(it,{style:{width:"100%"},palette:t,name:"categoryName",size:"small",label:"Categor\xeda",type:"text",autoFocus:!0,value:e.state.category.categoryName,onChange:e.handleInputChange})}),Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(U.a,{variant:"outlined",color:"primary",children:"guardar"})})]}),Object(v.jsx)(it,{style:{width:"97%",marginBottom:"15px"},palette:t,name:"categoryDescription",size:"small",label:"Descripci\xf3n",type:"text",value:e.state.category.categoryDescription,onChange:e.handleInputChange})]}):Object(v.jsx)(at,{palette:t,variant:"h5",children:oe(r.categoryName)}),Object(v.jsx)(T.a,{item:!0,children:!e.state.showCategoryInput&&Object(v.jsxs)(T.a,{container:!0,wrap:"nowrap",children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.toggleInput()},endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return i(a,r.categoryName)},endIcon:Object(v.jsx)(Ae.a,{})})]})})]})),e.state.category.categoryDescription&&!e.state.showCategoryInput&&Object(v.jsx)(at,{palette:t,variant:"h6",noWrap:!0,className:"cat-description",children:e.state.category.categoryDescription.slice(0,1).toUpperCase()+e.state.category.categoryDescription.slice(1)}),Object(v.jsx)(Rn,{margin:"10px 0 0 -18px",label:"Categor\xeda degustaci\xf3n (sin elecci\xf3n de plato)",control:Object(v.jsx)(St.a,{size:"small",color:"primary",checked:!e.state.category.canSelectProducts,onChange:function(t){return e.handleCheckboxChange(t,"canSelectProducts")}})}),Object(v.jsx)(Rn,{margin:"0 0 0 -18px",label:"Determina el precio del men\xfa",control:Object(v.jsx)(St.a,{size:"small",color:"primary",checked:e.state.category.determinesPrice,onChange:function(t){return e.handleCheckboxChange(t,"determinesPrice")}})}),Object(v.jsx)(Ee.a,{style:{margin:"12px 0 10px",zIndex:"999"}}),Object(v.jsx)(Be.c,{droppableId:r._id,type:"product",children:function(e,n){return Object(v.jsxs)(ot,Object(S.a)(Object(S.a)({palette:t,ref:e.innerRef},e.droppableProps),{},{isDraggingOver:n.isDraggingOver,children:[r.products.map((function(e,t){return Object(v.jsx)(Ln,{product:e,index:t+1,categoryIndex:a,removeProduct:o,openProductForm:s},e.name)})),!r.products.length&&!n.isDraggingOver&&Object(v.jsx)(at,{variant:"subtitle2",margin:"normal",color:"primary",className:"product-placeholder",children:"A\xfan no has a\xf1adido productos a esta categor\xeda."}),e.placeholder]}))}}),Object(v.jsx)(An,{addMenuProduct:c,index:a})]}))}})})}}]),n}(a.Component);qn.contextType=C;var Gn,Hn,Jn=qn,Kn=z.a.div(Gn||(Gn=Object(D.a)(["\n  border: 2px solid ",";\n  border-radius: 5px;\n  background-color: ",";\n  height: fit-content;\n  overflow-y: scroll;\n  width: 450px;\n  margin: 35px 0 35px 12px;\n  padding: 10px 20px;\n  @media (max-width: 1067px) {\n    width: 548px;\n    margin: 0;\n  }\n"])),(function(e){return e.palette.primary.main}),(function(e){return e.palette.dark})),Yn=z.a.div(Hn||(Hn=Object(D.a)(["\n  padding: 5px 10px 5px 20px;\n  margin: -5px -20px 0;\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  background-color: ",";\n"])),(function(e){return e.isDragging?e.palette.primary.main:e.palette.dark}));var Vn,Qn,Xn,Zn,$n,er,tr,nr=function(e){var t,n=Object(a.useContext)(C).palette;return Object(v.jsxs)(Kn,{palette:n,children:[Object(v.jsx)(E.a,{variant:"h6",gutterBottom:!0,style:{fontFamily:"arial"},children:Object(v.jsx)("i",{children:"Lista de productos disponibles para men\xfas."})}),Object(v.jsxs)(E.a,{variant:"subtitle1",style:{fontFamily:"arial"},children:["Puedes arrastrar los productos de esta lista para incluirlos en el men\xfa. Tambi\xe9n puedes editar estos productos o quitarlos de la lista de productos de men\xfa con los botones ",Object(v.jsx)(qe.a,{color:"primary",fontSize:"small",style:{margin:"0 5px -5px 5px",fontSize:"1.1rem"}})," y ",Object(v.jsx)(Ae.a,{color:"primary",fontSize:"small",style:{margin:"0 5px -5px 5px",fontSize:"1.1rem"}})]}),Object(v.jsx)(Ee.a,{style:{margin:"10px -20px 15px -20px"}}),(null===(t=e.isMenuProducts)||void 0===t?void 0:t.length)&&e.isMenuProducts?Object(v.jsx)(Be.c,{droppableId:"isMenuProducts",type:"product",children:function(t){return Object(v.jsxs)("div",Object(S.a)(Object(S.a)({ref:t.innerRef},t.droppableProps),{},{children:[e.isMenuProducts.map((function(t,r){return Object(v.jsx)(Be.b,{draggableId:t._id,index:r+1,children:function(r,a){return Object(v.jsxs)(Yn,Object(S.a)(Object(S.a)(Object(S.a)({palette:n},r.draggableProps),r.dragHandleProps),{},{ref:r.innerRef,isDragging:a.isDragging,children:[Object(v.jsx)(E.a,{variant:"h6",noWrap:!0,children:oe(t.name)}),Object(v.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.openProductForm(t._id)},color:"primary",endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.deleteProduct(t._id)},color:"primary",endIcon:Object(v.jsx)(Ae.a,{})})]})]}))}},r)})),t.placeholder]}))}}):Object(v.jsx)(E.a,{variant:"body2",children:'Agrega productos a esta lista desde alguna de las cartas, entrando en edici\xf3n de producto y seleccionando la opci\xf3n "DISPONIBLE EN MEN\xdaS".'})]})},rr=Object(z.a)(T.a)(Vn||(Vn=Object(D.a)(["\n  @media (max-width: 1067px) {\n    width: -webkit-fill-available;\n  }\n"]))),ar=z.a.div(Qn||(Qn=Object(D.a)(["\n  width: ",";\n  margin: ",";\n  & label {\n    font-family: arial;\n  }\n"])),(function(e){return e.width}),(function(e){return e.margin})),ir=z.a.div(Xn||(Xn=Object(D.a)(["\n  width: ",";\n  margin: ",";\n  @media (max-width: 1067px) {\n    margin-left: 18px;\n  }\n"])),(function(e){return e.width}),(function(e){return e.margin})),or=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.category,n=e.index,r=e.showConfirmationMessage,a=e.editCategory,i=e.removeProduct,o=e.openProductForm,c=e.addMenuProduct;return Object(v.jsx)(Jn,{category:t,index:n,showConfirmationMessage:r,editCategory:a,removeProduct:i,openProductForm:o,addMenuProduct:c})}}]),n}(a.PureComponent),cr=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).componentDidMount=Object(p.a)(d.a.mark((function e(){var t,n,a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.menuService.getCategories();case 3:return t=e.sent.data.message,e.next=6,r.menuService.getProducts();case 6:n=e.sent.data.message,a=ue(n.filter((function(e){return e.isMenuProduct})),r.props.menu),i=n.filter((function(e){return e.isMenu&&e._id!==r.props.menu._id})),r.setState({otherMenus:i,isMenuProducts:a,products:n,categories:t}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),r.onDragEnd=function(e){var t=e.destination,n=e.source,a=e.draggableId,i=e.type;if(t&&(t.droppableId!==n.droppableId||t.index!==n.index))if("category"===i){var o=Object(De.a)(r.state.menu.menuContent),c=o.splice(n.index-1,1),s=Object(l.a)(c,1)[0];o.splice(t.index-1,0,s);var u=Object(S.a)(Object(S.a)({},r.state.menu),{},{menuContent:o});r.setState({menu:u},(function(){return r.updateDB(u._id,u)}))}else if(n.droppableId===t.droppableId&&"isMenuProducts"!==t.droppableId){var d=Object(De.a)(r.state.menu.menuContent),p=d.findIndex((function(e){return e._id===n.droppableId})),m=Object(De.a)(d)[p].products,j=m.splice(n.index-1,1),h=Object(l.a)(j,1)[0];m.splice(t.index-1,0,h),d[p].products=m;var b=Object(S.a)(Object(S.a)({},r.state.menu),{},{menuContent:d});r.setState({menu:b},(function(){return r.updateDB(b._id,b)}))}else if("isMenuProducts"===n.droppableId&&"isMenuProducts"!==t.droppableId){var x=Object(De.a)(r.state.menu.menuContent),f=Object(De.a)(r.state.isMenuProducts),g=x.findIndex((function(e){return e._id===t.droppableId})),O=r.state.isMenuProducts[n.index-1],v=Object(De.a)(x)[g].products;v.splice(t.index-1,0,O),f.splice(f.findIndex((function(e){return e._id===a})),1),x[g].products=v;var y=Object(S.a)(Object(S.a)({},r.state.menu),{},{menuContent:x});r.setState({menu:y,isMenuProducts:f},(function(){return r.updateDB(y._id,y)}))}else if("isMenuProducts"!==t.droppableId){var w=Object(De.a)(r.state.menu.menuContent),C=w.findIndex((function(e){return e._id===n.droppableId})),P=w.findIndex((function(e){return e._id===t.droppableId})),k=Object(De.a)(w)[C].products,M=k.splice(n.index-1,1),I=Object(l.a)(M,1)[0],_=Object(De.a)(w)[P].products;_.splice(t.index-1,0,I),w[C].products=k,w[P].products=_;var D=Object(S.a)(Object(S.a)({},r.state.menu),{},{menuContent:w});r.setState({menu:D},(function(){return r.updateDB(D._id,D)}))}},r.showAlert=function(e,t,n){r.setState({alert:{open:!0,message:e,severity:t,vertical:n}})},r.closeAlert=function(e,t){r.setState({alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1,message:e,severity:t})})},r.showConfirmationMessage=function(e,t){e?r.setState({alert:{open:!0,message:"\xbfSeguro que quieres borrar la categor\xeda?",severity:"warning",vertical:"top",i:e,id:t}}):r.setState({alert:{open:!0,message:"\xbfSeguro que quieres borrar el men\xfa?",severity:"warning",vertical:"top"}})},r.toggleMenuInput=function(){r.state.showMenuInput||(window.addEventListener("mousedown",r.handleClick),window.addEventListener("keypress",r.handleEnter),r.setState({showMenuInput:!0}))},r.handleClick=function(e){"name"!==e.target.name&&"description"!==e.target.name&&r.MenuInputSubmit(e)},r.handleEnter=function(e){"Enter"===e.key&&r.MenuInputSubmit()},r.handleMenuInputChange=function(e){var t=e.target,n=t.value,a=t.name;r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},Object(_.a)({},a,n))})},r.handlePriceChange=function(e,t){var n=Object(S.a)({},r.state.menu),a=e.target,i=a.name,o=a.value;n.price[t][i]=o,r.setState({menu:n},(function(){return r.updateDB(n._id,n)}))},r.MenuInputSubmit=function(e){r.state.otherMenus.some((function(e){return e.name.toUpperCase()===r.state.menu.name.toUpperCase()}))?(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},{name:r.props.menu.name}),showMenuInput:!1,alert:{open:!0,severity:"error",message:"Ya existe un men\xfa con el nombre ".concat(r.state.menu.name.toUpperCase()),vertical:"bottom"}})):""===r.state.menu.name?(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.setState({menu:Object(S.a)(Object(S.a)({},r.state.menu),{},{name:r.props.menu.name}),showMenuInput:!1,alert:{open:!0,severity:"error",message:"No puedes dejar el nombre del men\xfa en blanco",vertical:"bottom"}})):(window.removeEventListener("mousedown",r.handleClick),window.removeEventListener("keypress",r.handleEnter),r.props.editMenuProduct(r.state.menu),r.setState({showMenuInput:!1,alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1})},(function(){return r.updateDB(r.state.menu._id,r.state.menu)})))},r.addCategory=function(e,t){if(e.preventDefault(),r.state.menu.menuContent.some((function(e){return e.categoryName.toUpperCase()===t.toUpperCase()})))r.setState({alert:{open:!0,severity:"error",message:"La categor\xeda ".concat(t.toUpperCase()," ya existe"),vertical:"bottom"}});else if(t){var n=JSON.parse(JSON.stringify(r.state.menu));n.menuContent.push({categoryName:t}),r.setState({alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1})},(function(){return r.updateDB(n._id,n)}))}else r.setState({alert:{open:!0,severity:"error",message:"Indica el nombre de la nueva categor\xeda",vertical:"bottom"}})},r.editCategory=function(e,t){var n=r.state.menu.menuContent.find((function(t){return t._id===e._id}));if(r.state.menu.menuContent.filter((function(t){return t._id!==e._id})).some((function(t){return t.categoryName.toUpperCase()===e.categoryName.toUpperCase()})))r.setState({alert:{open:!0,severity:"error",message:"La categor\xeda ".concat(e.categoryName.toUpperCase()," ya existe"),vertical:"bottom"}});else if(""===e.categoryName)r.setState({alert:{open:!0,severity:"error",message:"No puedes dejar el nombre de la categor\xeda en blanco",vertical:"bottom"}});else{var a=Object(S.a)({},r.state.menu),i=a.menuContent.findIndex((function(t){return t._id===e._id})),o=a.price.findIndex((function(e){return e.subDescription===n.categoryName}));e.determinesPrice?t?a.price.push({subDescription:e.categoryName,subPrice:0}):a.price[o].subDescription=e.categoryName:!e.determinesPrice&&t&&a.price.splice(o,1),a.menuContent.splice(i,1,e),r.setState({alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1})},(function(){return r.updateDB(a._id,a)}))}},r.deleteCategory=function(e,t){var n=Object(S.a)({},r.state.menu);n.menuContent.splice(t-1,1),r.setState({alert:Object(S.a)(Object(S.a)({},r.state.alert),{},{open:!1})},(function(){return r.updateDB(n._id,n)}))},r.removeProduct=function(e,t){var n=Object(S.a)({},r.state.menu),a=Object(De.a)(r.state.isMenuProducts),i=n.menuContent[t-1].products[e-1];a.push(i),n.menuContent[t-1].products.splice(e-1,1),r.setState({isMenuProducts:a},(function(){return r.updateDB(n._id,n)}))},r.addMenuProduct=function(e,t,n){e.preventDefault();var a=Object(S.a)({},r.state.menu),i=Object(De.a)(r.state.products),o={name:t,isMenuProduct:!0,price:[{subDescription:"",subPrice:0}]};i.some((function(e){return e.name.toUpperCase()===o.name.toUpperCase()}))?r.setState({alert:{open:!0,severity:"error",message:"El producto ".concat(o.name.toUpperCase()," ya existe"),vertical:"bottom"}}):t?r.menuService.addProduct(o).then((function(e){a.menuContent[n].products.push(e.data),i.push(e.data),r.setState({menu:a,products:i})})).catch((function(e){return r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}})})):r.setState({alert:{open:!0,severity:"error",message:"Indica el nombre del nuevo producto",vertical:"bottom"}})},r.updateDB=function(e,t){r.menuService.updateProduct(e,t).then((function(e){return r.setState({menu:e.data})})).catch((function(){return r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}})}))},r.openProductForm=function(e){var t=r.state.products.filter((function(t){return t._id===e})),n=Object(l.a)(t,1)[0];r.setState({openModal:!0,modalProduct:n})},r.closeProductForm=function(){r.setState({openModal:!1,modalProduct:null})},r.removeProductFromMenus=function(e){var t=Object(S.a)({},r.state.isMenuProducts[e]),n=Object(De.a)(r.state.isMenuProducts);t.isMenuProduct=!1,n.splice(e,1),r.setState({isMenuProducts:n},(function(){return r.updateDBWithMenuProduct(t._id,t)}))},r.deleteProduct=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(De.a)(r.state.isMenuProducts).filter((function(e){return e._id!==t})),a=Object(De.a)(r.state.products).filter((function(e){return e._id!==t})),e.next=4,r.menuService.deleteProduct(t);case 4:r.setState({isMenuProducts:n,products:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.submitProductForm=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var a,i,o,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=Object(De.a)(r.state.products),i=Object(De.a)(r.state.isMenuProducts),n.price.length>1&&((o=n.price[n.price.length-1]).subDescription&&o.subPrice||n.price.splice(-1,1)),a.filter((function(e){return e._id!==n._id})).some((function(e){return e.name.toUpperCase()===n.name.toUpperCase()}))?r.setState({alert:{open:!0,severity:"error",message:"El producto ".concat(n.name.toUpperCase()," ya existe"),vertical:"bottom"}}):(a.splice(a.findIndex((function(e){return e._id===n._id})),1,n),(c=i.findIndex((function(e){return e._id===n._id})))>=0&&i.splice(c,1,n),r.setState({products:a,isMenuProducts:i},(function(){return r.updateDBWithMenuProduct(n._id,n)})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.updateDBWithMenuProduct=function(e,t){r.menuService.updateProduct(e,t).then((function(){return r.closeProductForm()})).catch((function(){return r.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}})}))},r.previewMenu=function(){r.setState({previewMenu:!0})},r.closePreview=function(){r.setState({previewMenu:!1})},r.goBack=function(){r.props.deselectMenu()},r.state={menu:e.menu,showMenuInput:!1,otherMenus:void 0,isMenuProducts:void 0,products:void 0,openModal:!1,modalProduct:null,previewMenu:!1,alert:{open:!1,message:"",severity:void 0,vertical:"bottom"}},r.menuService=new ie,r}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:this.state.previewMenu?Object(v.jsx)(He,{menu:Object(S.a)({},this.state.menu),close:this.closePreview}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(En,{container:!0,justify:"flex-start",children:[this.state.showMenuInput?Object(v.jsxs)(In,{autoComplete:"off",children:[Object(v.jsxs)(_n,{container:!0,justify:"space-between",alignItems:"flex-end",wrap:"nowrap",children:[Object(v.jsx)(T.a,{item:!0,xs:7,style:{marginRight:"24px"},children:Object(v.jsx)(F.a,{fullWidth:!0,name:"name",label:"Nombre de la Carta",type:"text",autoFocus:!0,value:this.state.menu.name,onChange:this.handleMenuInputChange})}),Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(U.a,{variant:"outlined",color:"primary",children:"guardar"})})]}),Object(v.jsx)(_n,{container:!0,justify:"space-between",alignItems:"flex-end",children:Object(v.jsx)(T.a,{item:!0,xs:12,children:Object(v.jsx)(F.a,{style:{width:"99%",marginTop:"10px"},name:"description",label:"Descripci\xf3n",type:"text",value:this.state.menu.description,onChange:this.handleMenuInputChange})})})]}):Object(v.jsx)(T.a,{item:!0,children:Object(v.jsx)(Dn,{variant:"h5",children:oe(this.state.menu.name)})}),!this.state.showMenuInput&&Object(v.jsx)(T.a,{item:!0,style:{paddingRight:"10px"},children:Object(v.jsxs)(T.a,{container:!0,wrap:"nowrap",children:[Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.toggleMenuInput()},endIcon:Object(v.jsx)(qe.a,{})}),Object(v.jsx)(U.a,{style:{minWidth:"0",padding:"5px 12px 5px 0"},onClick:function(){return e.showConfirmationMessage()},endIcon:Object(v.jsx)(Ae.a,{})})]})})]}),Object(v.jsx)(En,{container:!0,justify:"flex-start",fontStyle:"italic",children:!this.state.showMenuInput&&this.state.menu.description&&Object(v.jsx)(Dn,{variant:"h6",children:this.props.menu.description.slice(0,1).toUpperCase()+this.props.menu.description.slice(1)})}),1===this.state.menu.price.length?Object(v.jsx)(En,{children:Object(v.jsx)(ir,{width:"8em",margin:"20px 0 0 63px",children:Object(v.jsx)(F.a,{size:"small",variant:"outlined",name:"subPrice",label:"Precio",type:"number",InputProps:{startAdornment:Object(v.jsx)(Pt.a,{position:"start",children:"\u20ac"})},value:this.state.menu.price[0].subPrice,onChange:function(t){return e.handlePriceChange(t,0)}})})}):this.state.menu.price.map((function(t,n){return n>0&&Object(v.jsxs)(En,{container:!0,justify:"flex-start",margintop:"20px",style:{alignItems:"center"},children:[Object(v.jsx)(ar,{width:"32em",children:Object(v.jsx)(Dn,{variant:"h6",noWrap:!0,children:oe(t.subDescription)})}),Object(v.jsx)(ar,{width:"8em",margin:"0 14px 0 -30px",children:Object(v.jsx)(F.a,{size:"small",variant:"outlined",name:"subPrice",label:"Precio",type:"number",InputProps:{startAdornment:Object(v.jsx)(Pt.a,{position:"start",children:"\u20ac"})},value:t.subPrice,onChange:function(t){return e.handlePriceChange(t,n)}})})]},n)})),Object(v.jsx)(xn,{goBack:function(){return e.goBack()},previewMenu:function(){return e.previewMenu()}}),Object(v.jsx)(Be.a,{onDragEnd:this.onDragEnd,children:Object(v.jsxs)(T.a,{container:!0,justify:"center",children:[Object(v.jsxs)(rr,{item:!0,children:[Object(v.jsx)(Be.c,{droppableId:"menu",type:"category",children:function(t){return Object(v.jsxs)(Sn,Object(S.a)(Object(S.a)({width:"548px",margin:"30px 0 0"},t.droppableProps),{},{ref:t.innerRef,children:[e.state.menu.menuContent.map((function(t,n){return Object(v.jsx)(or,{category:t,index:n+1,showConfirmationMessage:function(t,n){return e.showConfirmationMessage(t,n)},editCategory:function(t,n){return e.editCategory(t,n)},removeProduct:function(t,n){return e.removeProduct(t,n)},openProductForm:function(t){return e.openProductForm(t)},addMenuProduct:function(t,r){return e.addMenuProduct(t,r,n)}},t.categoryName)})),t.placeholder]}))}}),Object(v.jsx)(Sn,{width:"548px",margin:"0 auto",children:Object(v.jsx)(pn,{addCategory:function(t,n){return e.addCategory(t,n)}})})]}),Object(v.jsx)(nr,{menuDescription:!!this.state.menu.description,isMenuProducts:this.state.isMenuProducts,openProductForm:function(t){return e.openProductForm(t)},deleteProduct:function(t){return e.deleteProduct(t)}})]})}),this.state.openModal&&Object(v.jsx)(sn,{open:this.state.openModal,handleClose:function(){return e.closeProductForm()},submitForm:function(t,n){return e.submitProductForm(t,n)},showAlert:function(t,n,r){return e.showAlert(t,n,r)},product:this.state.modalProduct,otherCategories:this.state.categories,otherMenus:this.props.otherMenus},this.state.modalProduct._id),Object(v.jsx)(Mn,{anchorOrigin:{vertical:this.state.alert.vertical,horizontal:"center"},open:this.state.alert.open,message:this.state.alert.message,severity:this.state.alert.severity,i:this.state.alert.i,id:this.state.alert.id,closeAlert:function(t,n){return e.closeAlert(t,n)},deleteMenu:this.props.deleteMenuProduct,deleteCategory:function(t,n){return e.deleteCategory(n,t)}})]})})}}]),n}(a.Component),sr=z.a.div(Zn||(Zn=Object(D.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 600px;\n  margin: 0 auto -80px;\n  & .arial, input, label {\n    font-family: arial;\n  }\n"]))),ur=Object(z.a)(T.a)($n||($n=Object(D.a)(["\n  background-color: ",";\n  padding: 24px 10px;\n  margin-top: 30px;\n  border-radius: 9px;\n  @media (max-width: 500px) {\n    margin: 30px -10px 0;\n    padding: 24px 0;\n  }\n"])),(function(e){return e.palette.dark})),dr=Object(z.a)(Ee.a)(er||(er=Object(D.a)(["\n  width: 78%;\n  background-color: ",";\n  margin: 10px auto 50px;\n"])),(function(e){return e.palette.primary.main})),lr=Object(z.a)(X)(tr||(tr=Object(D.a)(["\n  height: 62px;\n  width: 100%;\n  min-width: 124px;\n"]))),pr=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).componentDidMount=Object(p.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.menuService.getMenus();case 3:return n=t.sent.data.message,t.next=6,e.menuService.getMenuProducts();case 6:r=t.sent.data,e.setState({menus:[].concat(Object(De.a)(n),Object(De.a)(r))}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.closeAlert=function(t,n){e.setState({alert:Object(S.a)(Object(S.a)({},e.state.alert),{},{open:!1,message:t,severity:n})})},e.selectMenu=function(t){e.props.isMenuSelected(!0),t.isMenu?e.setState({selectedMenuProduct:t}):e.setState({selectedMenu:t})},e.deselectMenu=Object(p.a)(d.a.mark((function t(){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.isMenuSelected(!1),t.prev=1,t.next=4,e.menuService.getMenus();case 4:return n=t.sent.data.message,t.next=7,e.menuService.getMenuProducts();case 7:r=t.sent.data,e.setState({menus:[].concat(Object(De.a)(n),Object(De.a)(r)),selectedMenu:null,selectedMenuProduct:null}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 14:case"end":return t.stop()}}),t,null,[[1,11]])}))),e.addMenu=function(){var t=Object(p.a)(d.a.mark((function t(n,r,a){var i,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!e.state.menus.some((function(e){return e.name.toUpperCase()===r.name.toUpperCase()}))){t.next=5;break}e.setState({alert:{open:!0,severity:"error",message:"".concat(a?"El men\xfa":"La carta"," ").concat(r.name.toUpperCase()," ya existe"),vertical:"bottom"}}),t.next=27;break;case 5:if(r.name){t.next=9;break}e.setState({alert:{open:!0,severity:"error",message:"Indica el nombre d".concat(a?"el nuevo men\xfa":"e la nueva carta"),vertical:"bottom"}}),t.next=27;break;case 9:if(t.prev=9,!a){t.next=16;break}return t.next=13,e.menuService.addProduct(Object(S.a)(Object(S.a)({},r),{},{isMenu:a,price:[{subDescription:"",subPrice:0}]}));case 13:t.t0=t.sent,t.next=19;break;case 16:return t.next=18,e.menuService.addMenu(r);case 18:t.t0=t.sent;case 19:i=t.t0,o=[].concat(Object(De.a)(e.state.menus),[i.data]),e.setState({menus:o}),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(9),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 27:case"end":return t.stop()}}),t,null,[[9,24]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e.editMenu=function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.menuService.updateMenu(n._id,n);case 3:r=t.sent,a=Object(De.a)(e.state.menus).filter((function(e){return e._id!==n._id})).concat(r.data),e.setState({menus:a,selectedMenu:r.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.deleteMenu=function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a,i,o,c,s,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.menuService.getCategories();case 3:return r=t.sent.data.message,a=r.filter((function(t){return t.inMenu===e.state.selectedMenu._id})),Promise.all(a.map((function(t){return e.menuService.deleteCategory(t._id)}))),i=n.filter((function(e){return e.categories.some((function(e){return a.some((function(t){return t._id===e.id}))}))})),o=i.filter((function(e){return 1===e.categories.length})),c=i.filter((function(e){return 1!==e.categories.length})),a.forEach((function(e){c.forEach((function(t){t.categories.splice(t.categories.findIndex((function(t){return t.id===e._id})),1)}))})),Promise.all(o.map((function(t){return e.menuService.deleteProduct(t._id)}))),Promise.all(c.map((function(t){return e.menuService.updateProduct(t._id,t)}))),t.next=14,e.menuService.deleteMenu(e.state.selectedMenu._id,e.state.selectedMenu);case 14:s=t.sent,u=Object(De.a)(e.state.menus).filter((function(t){return t._id!==e.state.selectedMenu._id})),e.setState({menus:u,selectedMenu:null,alert:{open:!0,severity:"success",message:"La carta ".concat(s.data.name.toUpperCase()," ha sido eliminado de la base de datos"),vertical:"bottom"}}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(0),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),e.editMenuProduct=function(t){var n=Object(De.a)(e.state.menus);n.splice(e.state.menus.findIndex((function(e){return e._id===t._id})),1,t),e.setState({menus:n,selectedMenuProduct:t})},e.deleteMenuProduct=function(){e.menuService.deleteProduct(e.state.selectedMenuProduct._id).then((function(){var t=e.state.menus.filter((function(t){return t._id!==e.state.selectedMenuProduct._id}));e.setState({menus:t,selectedMenuProduct:null,alert:{open:!0,severity:"success",message:"".concat(e.state.selectedMenuProduct.name.toUpperCase()," ha sido eliminado de la base de datos"),vertical:"bottom"}})})).catch((function(){return e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}})}))},e.state={menus:void 0,selectedMenu:null,selectedMenuProduct:null,alert:{open:!1,message:"",severity:void 0,vertical:"bottom"}},e.menuService=new ie,e}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.context.palette;return Object(v.jsxs)(v.Fragment,{children:[this.state.menus?this.state.selectedMenu?Object(v.jsx)(zn,{menu:this.state.selectedMenu,otherMenus:this.state.menus.filter((function(t){return!t.isMenu&&t._id!==e.state.selectedMenu._id})),deselectMenu:function(){return e.deselectMenu()},editMenu:function(t){return e.editMenu(t)},deleteMenu:function(t){return e.deleteMenu(t)}}):this.state.selectedMenuProduct?Object(v.jsx)(cr,{menu:this.state.selectedMenuProduct,otherMenus:this.state.menus.filter((function(e){return!e.isMenu})),deselectMenu:function(){return e.deselectMenu()},editMenuProduct:function(t){return e.editMenuProduct(t)},deleteMenuProduct:function(){return e.deleteMenuProduct()}}):Object(v.jsxs)(sr,{children:[Object(v.jsx)(E.a,{variant:"h5",align:"center",className:"arial",children:"Cartas y Men\xfas"}),Object(v.jsx)(E.a,{variant:"body1",align:"center",className:"arial",children:"Seleciona una carta o men\xfa para acceder al editor."}),Object(v.jsxs)(ur,{palette:t,children:[Object(v.jsxs)(T.a,{container:!0,children:[Object(v.jsxs)(T.a,{item:!0,xs:6,children:[Object(v.jsx)(E.a,{variant:"h6",align:"center",gutterBottom:!0,className:"arial",children:"Cartas"}),Object(v.jsx)(dr,{palette:t}),this.state.menus.filter((function(e){return!e.isMenu})).sort((function(e,t){return e.createdAt-t.createdAt})).map((function(t){return Object(v.jsx)(T.a,{container:!0,justify:"center",style:{padding:"0 15px 30px"},children:Object(v.jsx)(lr,{onClick:function(){return e.selectMenu(t)},variant:"contained",children:t.name})},t._id)}))]}),Object(v.jsxs)(T.a,{item:!0,xs:6,children:[Object(v.jsx)(E.a,{variant:"h6",align:"center",gutterBottom:!0,className:"arial",children:"Men\xfas"}),Object(v.jsx)(dr,{palette:t}),this.state.menus.filter((function(e){return e.isMenu})).map((function(t){return Object(v.jsx)(T.a,{container:!0,justify:"center",style:{padding:"0 15px 30px"},children:Object(v.jsx)(lr,{onClick:function(){return e.selectMenu(t)},variant:"contained",children:t.name})},t._id)}))]})]}),Object(v.jsxs)(T.a,{container:!0,style:{marginTop:"30px"},children:[Object(v.jsx)(T.a,{item:!0,xs:6,children:Object(v.jsx)(Le,{type:"carta",menus:this.state.menus,addMenu:function(t,n){return e.addMenu(t,n)}})}),Object(v.jsx)(T.a,{item:!0,xs:6,children:Object(v.jsx)(Le,{type:"men\xfa",menus:this.state.menus,addMenu:function(t,n){return e.addMenu(t,n,!0)}})})]})]})]}):Object(v.jsx)(Xt,{}),Object(v.jsx)(Mn,{anchorOrigin:{vertical:this.state.alert.vertical,horizontal:"center"},open:this.state.alert.open,message:this.state.alert.message,severity:this.state.alert.severity,closeAlert:function(t,n){return e.closeAlert(t,n)}})]})}}]),n}(a.Component);pr.contextType=C;var mr=pr;var jr,hr=function(e){return Object(v.jsx)(E.a,{align:"center",variant:"h5",children:"P\xe1gina en construcci\xf3n"})},br=z.a.main(jr||(jr=Object(D.a)(["\n  padding: 100px 30px 80px;\n  background-color: ",";\n  min-height: 100vh;\n  @media (max-width: 1067px) {\n    padding: 100px 10px 80px;\n  }\n"])),(function(e){return e.palette.secondary.main}));var xr,fr,gr,Or=function(e){var t=Object(a.useContext)(C).palette,n=Object(a.useState)(!1),r=Object(l.a)(n,2),i=r[0],o=r[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ke,{storeUser:e.storeUser,isMenuSelected:i}),Object(v.jsx)(br,{palette:t,children:"/pedidos"===e.location.pathname?Object(v.jsx)(_e,{}):"/usuarios"===e.location.pathname?Object(v.jsx)(hr,{}):Object(v.jsx)(mr,{isMenuSelected:function(e){return o(e)}})})]})},vr=z.a.div(xr||(xr=Object(D.a)(["\n  margin-top: 10vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),yr=z.a.form(fr||(fr=Object(D.a)(["\n  padding: 15px;\n  border: 1px solid ",";\n  background-color: ",";\n  border-radius: 5px;\n  width: 90%;\n  max-width: 400px;\n  display: flex;\n  flex-direction: column;\n  & .input {\n    margin-bottom: 20px;\n  }\n  & Button {\n    margin-top: 20px;\n  }\n  & h3, input, label, button {\n    font-family: arial;\n  }\n"])),(function(e){return e.palette.light}),(function(e){return e.palette.dark})),wr=Object(z.a)(E.a)(gr||(gr=Object(D.a)(["\n  padding: 8px;\n  margin-bottom: 10px\n"]))),Cr=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this)).handleInputChange=function(e){var t=e.target,n=t.name,a=t.value;r.setState(Object(_.a)({},n,a))},r.handleSubmit=function(e){e.preventDefault(),r.authService.login(r.state).then((function(e){r.props.storeUser(e.data),r.props.history.push("/")})).catch((function(e){return console.error(e)}))},r.state={username:"",password:""},r.authService=new fe,r}return Object(j.a)(n,[{key:"render",value:function(){var e=this.context.palette;return Object(v.jsx)(br,{palette:e,children:Object(v.jsx)(vr,{children:Object(v.jsxs)(yr,{onSubmit:this.handleSubmit,palette:e,children:[Object(v.jsx)(wr,{align:"center",component:"h3",variant:"h4",children:"Log In"}),Object(v.jsx)(F.a,{className:"input",id:"username",label:"Nombre de usuario",type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),Object(v.jsx)(F.a,{className:"input",id:"password",label:"Contrase\xf1a",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),Object(v.jsx)(U.a,{variant:"contained",type:"submit",color:"primary",children:"Entrar"})]})})})}}]),n}(a.Component);Cr.contextType=C;var Pr,kr,Mr=Cr,Sr=z.a.div(Pr||(Pr=Object(D.a)(["\n  display: ",";\n  animation: fadeIn ease 7s;\n  -webkit-animation: fadeIn ease 7s;\n  -moz-animation: fadeIn ease 7s;\n  -o-animation: fadeIn ease 7s;\n  -ms-animation: fadeIn ease 7s;\n  & h4 {\n    padding-inline: 30px;\n  }\n  & img {\n    width: 100%;\n    margin-block: 25px;\n  }\n  & a {\n    text-decoration: none;\n  }\n  @keyframes fadeIn {\n    0% {\n      opacity:0;\n    }\n    100% {\n      opacity:1;\n    }\n  }\n  @-moz-keyframes fadeIn {\n    0% {\n      opacity:0;\n    }\n    100% {\n      opacity:1;\n    }\n  }\n  @-webkit-keyframes fadeIn {\n    0% {\n      opacity:0;\n    }\n    100% {\n      opacity:1;\n    }\n  }\n  @-o-keyframes fadeIn {\n    0% {\n      opacity:0;\n    }\n    100% {\n      opacity:1;\n    }\n  }\n  @-ms-keyframes fadeIn {\n    0% {\n      opacity:0;\n    }\n    100% {\n      opacity:1;\n    }\n  }\n"])),(function(e){return e.display})),Ir=Object(z.a)(U.a)(kr||(kr=Object(D.a)(["\n  display: block;\n  margin: 0 auto;\n  max-width: 230px;\n  text-transform: none;\n"])));var _r,Dr=Object(I.g)((function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(!1),c=Object(l.a)(o,2),u=c[0],d=c[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){return i(!0)}),2e3),t=setTimeout((function(){return d(!0)}),4e3);return function(){clearTimeout(e),clearTimeout(t)}}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(Sr,{display:r?"block":"none",children:[Object(v.jsx)(E.a,{variant:"h2",align:"center",children:"Hola,"}),Object(v.jsx)(E.a,{variant:"h3",align:"center",gutterBottom:!0,children:"bienvenid@ a"}),Object(v.jsx)(E.a,{variant:"h1",align:"center",children:"LUIS II"})]}),Object(v.jsxs)(Sr,{display:u?"block":"none",children:[Object(v.jsx)(E.a,{variant:"h4",align:"center",style:{margin:"15px 0 40px"},children:"\xbfTe gustar\xeda pedir con tu m\xf3vil?"}),Object(v.jsx)(Ir,{variant:"contained",color:"primary",style:{fontSize:"2rem",padding:"10px 45px"},onClick:e.order,children:"\xa1S\xed!"}),Object(v.jsx)(s.b,{to:"/carta",children:Object(v.jsx)(Ir,{style:{fontSize:"1.2rem",margin:"30px auto 30px"},children:"No, quiero ver la carta y pedir al camarero."})})]})]})})),Er=n(111),Fr=n.n(Er),Ur=z.a.div(_r||(_r=Object(D.a)(["\n  min-height: 100vh;\n  padding-top: 40px;\n"])));var zr=function(e){var t=Object(a.useContext)(C).palette,n=Object(a.useState)(null),r=Object(l.a)(n,2),i=r[0],o=r[1],c=Object(a.useRef)(null);return Object(a.useEffect)((function(){return i||o(Fr()({el:c.current,mouseControls:!0,touchControls:!0,gyroControls:!1,scale:1,scaleMobile:1,color:t.primary.main,backgroundColor:t.dark})),function(){i&&i.destroy()}}),[i,t]),Object(v.jsx)(Ur,{ref:c,children:Object(v.jsx)(Dr,{order:e.order})})};var Nr=function(e){return Object(v.jsx)("div",{children:"menu pedible"})},Tr=function e(){var t=this;Object(m.a)(this,e),this.getOrder=function(e){return t.api.get("".concat(e))},this.api=g.a.create({baseURL:"https://jinsokuna.herokuapp.com/api/orders/",withCredentials:!0})},Lr=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).componentDidMount=Object(p.a)(d.a.mark((function t(){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.orderService.getOrder(e.props.location.search.slice(-3));case 3:n=t.sent.data,e.setState({order:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({alert:{open:!0,severity:"error",message:"Error de servidor",vertical:"bottom"}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.orderWithMobile=function(){e.setState({wantsToOrder:!0})},e.state={order:null,wantsToOrder:!1,alert:{open:!1,message:"",severity:void 0,vertical:"bottom"}},e.orderService=new Tr,e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state,t=e.order,n=e.wantsToOrder,r=this.orderWithMobile;return Object(v.jsx)(v.Fragment,{children:t?t.products.length||n?Object(v.jsx)(Nr,{}):Object(v.jsx)(zr,{order:r}):Object(v.jsx)(Xt,{})})}}]),n}(a.Component),Br=function(e){var t=e.storeUser,n=e.loggedUser;return Object(v.jsxs)(I.d,{children:[Object(v.jsx)(I.b,{path:"/login",render:function(e){return Object(v.jsx)(Mr,Object(S.a)({storeUser:t},e))}}),Object(v.jsx)(I.b,{path:"/",exact:!0,render:function(e){return n?(n.role,Object(v.jsx)(Or,Object(S.a)({storeUser:t},e))):Object(v.jsx)(I.a,{to:"/login"})}}),Object(v.jsx)(I.b,{path:"/pedidos",render:function(e){return n?"EDITOR"===n.role?Object(v.jsx)(Or,Object(S.a)({storeUser:t},e)):Object(v.jsx)(I.a,{to:"/"}):Object(v.jsx)(I.a,{to:"/login"})}}),Object(v.jsx)(I.b,{path:"/pedir",render:function(e){return Object(v.jsx)(Lr,Object(S.a)({},e))}}),Object(v.jsx)(I.b,{path:"/carta",render:function(e){return Object(v.jsx)(He,Object(S.a)({},e))}}),Object(v.jsx)(I.b,{path:"/usuarios",render:function(e){return n?"EDITOR"===(null===n||void 0===n?void 0:n.role)?Object(v.jsx)(Or,Object(S.a)({storeUser:t},e)):Object(v.jsx)(I.a,{to:"/"}):Object(v.jsx)(I.a,{to:"/login"})}}),Object(v.jsx)(I.b,{path:"/",render:function(){return Object(v.jsx)(I.a,{to:"/"})}})]})},Wr=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).state={loggedUser:null},e.authService=new fe,e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;this.authService.isLoggedIn().then((function(t){return e.storeUser(t.data)})).catch((function(t){e.storeUser(t.loggedUser)}))}},{key:"storeUser",value:function(e){this.setState({loggedUser:e})}},{key:"render",value:function(){var e=this,t=this.context,n=t.palette,r=t.font,a=Object(M.a)({palette:{primary:n.primary,secondary:n.secondary,type:n.type},typography:{fontFamily:r}});return Object(v.jsxs)(P.a,{theme:a,children:[Object(v.jsx)(k.a,{}),null!==this.state.loggedUser&&Object(v.jsx)(Br,{storeUser:function(t){return e.storeUser(t)},loggedUser:this.state.loggedUser})]})}}]),n}(a.Component);Wr.contextType=C;var Ar=Wr;c.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(s.a,{children:Object(v.jsx)(w,{children:Object(v.jsx)(Ar,{})})})}),document.getElementById("root"))}},[[172,1,2]]]);
//# sourceMappingURL=main.db89fe2b.chunk.js.map